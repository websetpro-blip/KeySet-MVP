# 05. –†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è –≤–∫–ª–∞–¥–∫–∏ ¬´–î–∞–Ω–Ω—ã–µ¬ª

> **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è Data Tab: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã, –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö, UX –ø–∞—Ç—Ç–µ—Ä–Ω—ã**

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–¶–µ–ª—å](#—Ü–µ–ª—å)
- [–î–ª—è –∫–æ–≥–æ](#–¥–ª—è-–∫–æ–≥–æ)
- [–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã](#—Å–≤—è–∑–∞–Ω–Ω—ã–µ-–¥–æ–∫—É–º–µ–Ω—Ç—ã)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∫–ª–∞–¥–∫–∏](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–≤–∫–ª–∞–¥–∫–∏)
- [–î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è](#–¥–∏–∞–≥—Ä–∞–º–º–∞-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
- [–°–Ω–∏–ø–ø–µ—Ç—ã](#—Å–Ω–∏–ø–ø–µ—Ç—ã)
- [–¢–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏](#—Ç–∏–ø–æ–≤—ã–µ-–æ—à–∏–±–∫–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [TL;DR](#tldr)
- [–ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è](#—á–µ–∫-–ª–∏—Å—Ç-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è)
- [–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ](#–ø–æ—Å–ª–µ–¥–Ω–µ–µ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

---

## –¶–µ–ª—å

–û–ø–∏—Å–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤–∫–ª–∞–¥–∫–∏ ¬´–î–∞–Ω–Ω—ã–µ¬ª: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ—Ä–∞–∑, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend.

## –î–ª—è –∫–æ–≥–æ

- Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ (React/Zustand)
- Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ API `/api/data`
- QA, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å –≤—ã–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω—ã—Ö

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [09_TABS_OVERVIEW.md](./09_TABS_OVERVIEW.md) ‚Äî –æ–±–∑–æ—Ä –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [10_API_INTEGRATION.md](./10_API_INTEGRATION.md) ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/api/data` –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend
- [11_DATA_FLOW.md](./11_DATA_FLOW.md) ‚Äî –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö UI ‚Üî API ‚Üî –ë–î –∏ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∫–ª–∞–¥–∫–∏

```mermaid
graph TD
    A[DataTabLayout] --> B[Toolbar]
    A --> C[DataTable]
    A --> D[FiltersPanel]

    B --> E[Import CSV]
    B --> F[Export]
    B --> G[Bulk Actions]

    C --> H[Zustand dataStore]
    D --> H

    H -->|fetch| I[/api/data/phrases]
    H -->|mutations| J[/api/data/bulk]

    I --> K[SQLite freq_results]
    J --> K
```

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant UI as Data Tab UI
    participant Store as Zustand Store
    participant API as FastAPI /api/data
    participant DB as SQLite DB
    
    User->>UI: –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–≥–∏–æ–Ω—É
    UI->>Store: setFilter(region=213)
    Store->>API: GET /api/data/phrases?region=213
    API->>DB: SELECT ... WHERE region_id=213
    DB-->>API: rows
    API-->>Store: JSON data
    Store-->>UI: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
    User->>UI: –≠–∫—Å–ø–æ—Ä—Ç CSV
    UI->>Store: exportData()
    Store->>API: GET /api/data/export
    API-->>Store: CSV stream
    Store-->>User: –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

1. **Toolbar** ‚Äî –∏–º–ø–æ—Ä—Ç CSV, —ç–∫—Å–ø–æ—Ä—Ç, –º–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
2. **FiltersPanel** ‚Äî —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–µ–≥–∏–æ–Ω—É, —Ç–µ–≥–∞–º, –¥–∞—Ç–∞–º
3. **DataTable** ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Ñ—Ä–∞–∑ –∏ –º–µ—Ç—Ä–∏–∫
4. **DetailsDrawer** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ —Ñ—Ä–∞–∑–µ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)
5. **Notifications** ‚Äî —É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

---

## –°–Ω–∏–ø–ø–µ—Ç—ã

### DataTab –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
// —Ñ–∞–π–ª: frontend/src/modules/data/App.tsx:TBD-TBD
```

### –°–µ–ª–µ–∫—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ store

```typescript
// —Ñ–∞–π–ª: frontend/src/modules/data/store/useStore.ts:TBD-TBD
```

### API —Å–ª–æ–π –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

```typescript
// —Ñ–∞–π–ª: frontend/src/modules/data/api/data.ts:TBD-TBD
```

### –≠–∫—Å–ø–æ—Ä—Ç CSV –Ω–∞ backend

```python
# —Ñ–∞–π–ª: backend/routers/data.py:TBD-TBD
```

---

## –¢–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –û—à–∏–±–∫–∞: ¬´–§—Ä–∞–∑—ã –Ω–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è¬ª

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ ‚Üí API.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å payload –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º

### ‚ùå –û—à–∏–±–∫–∞: ¬´–≠–∫—Å–ø–æ—Ä—Ç –ø—É—Å—Ç–æ–π¬ª

**–ü—Ä–∏—á–∏–Ω–∞:** –°–æ—Å—Ç–æ—è–Ω–∏–µ store –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤—ã–∑–≤–∞—Ç—å `fetchPhrases`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (region, tags)
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏

### ‚ùå –û—à–∏–±–∫–∞: ¬´–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö¬ª

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ store –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ—Å–ª–µ POST/DELETE –≤—ã–∑–≤–∞—Ç—å `refresh`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –æ—Ç–∫–∞—Ç–æ–º
- –î–æ–±–∞–≤–∏—Ç—å WebSocket —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

```typescript
useEffect(() => {
  fetchPhrases();
}, [fetchPhrases]);
```

### 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞

```typescript
setFilters((prev) => ({
  ...prev,
  regionId: selectedRegion,
}));
```

### 3. –≠–∫—Å–ø–æ—Ä—Ç

```typescript
await exportPhrases({ format: 'csv', regionId });
```

---

## TL;DR

- –í–∫–ª–∞–¥–∫–∞ ¬´–î–∞–Ω–Ω—ã–µ¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Zustand store + React —Ç–∞–±–ª–∏—Ü—É
- –§–∏–ª—å—Ç—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å API –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–µ–Ω –≤ CSV/Excel
- –ü–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ store

---

## –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω—É –∏ —Ç–µ–≥–∞–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç CSV –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç —Ç–∞–±–ª–∏—Ü—É
- [ ] –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ notifications
- [ ] WebSocket –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω)
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç state

---

## –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

- **–î–∞—Ç–∞:** 2024-11-10
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** TBD
