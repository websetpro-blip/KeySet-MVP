# Памятка Codex (UTF-8)\

Пиши на русском

Всегда пушь в хаб измененные файлы


# КРИТИЧНО: НЕ ОСТАНАВЛИВАЙСЯ

1. НЕ ПИШИ "Finished working"
2. НЕ СПРАШИВАЙ "что дальше?"
3. НЕ ОТЧИТЫВАЙСЯ после каждого шага
4. ПРОСТО ДЕЛАЙ ЗАДАЧУ ДО КОНЦА

Если нужна помощь — я сам спрошу.


## 0. Последовательность действий
1. Прочитать `C:\AI\yandex\бд\инструкции\Архитектура\Задачи\Новое\загрузка софта
2. Прочитать C:\AI\yandex\бд\инструкции\Архитектура\Задачи\Новое\ARCHITECTURE
3. Выбрать модуль → перенести исходники → настроить зависимости.
4. Проверить build + launcher.
5. Обновить `ГОТОВЫЕ_МОДУЛИ_план.md`.
6. Проверить заново эту памятку перед сдачей задачи.
Файл проверяю **перед стартом** любой правки и **после завершения** работы.

## 1. Базовые правила
- **Строго UTF-8** для всех файлов (`Set-Content -Encoding UTF8`, `Get-Content -Encoding UTF8`).
- Перед действиями читаю `C:\AI\yandex\бд\инструкции\Архитектура\Задачи\Новое\загрузка софта` и `C:\AI\yandex\бд\инструкции\Архитектура\Задачи\Отчет`, сверяюсь с требованиями.
- После изменений обновляю отчёт `бд/инструкции/Архитектура/Задачи/Отчет/ГОТОВЫЕ_МОДУЛИ_план.md`.

# КРИТИЧНО: НЕ ОСТАНАВЛИВАЙСЯ

1. НЕ ПИШИ "Finished working"
2. НЕ СПРАШИВАЙ "что дальше?"
3. НЕ ОТЧИТЫВАЙСЯ после каждого шага
4. ПРОСТО ДЕЛАЙ ЗАДАЧУ ДО КОНЦА

Если нужна помощь — я сам спрошу.


## 2. Работа с ГОТОВЫМИ МОДУЛЯМИ - МОДУЛИ ЧАСТИЧНО ПОДКЛЮЧЕНЫ (НЕ ДЕЛАЙ ЗАМЕНЯЙ ТО ЧТО УЖЕ РАБОТАЕТ) это означает, что React UI готов, но backend логика (API адаптеры) ещё требует интеграции
- **НЕ СОЗДАЮ UI с нуля.
- Подключаю **все зависимости** из исходного `package.json` (jszip, fast-xml-parser, Supabase и т.д.).
- Никаких `@ts-nocheck`, пока не пойму и не настрою типы. Если нужен временный `ts-nocheck`, фиксирую таск в плане.

## 3. Перед коммитом/отчётом
- Проверяю:
  1. `npm run build`
  2. `python launcher.py`
  3. UI совпадает с исходным HTML/CSS (`ГОТОВЫЕ МОДУЛИ/<модуль>/index.html`) – сверка по структуре и стилям.
- Обновляю `ГОТОВЫЕ_МОДУЛИ_план.md` (что сделал, что осталось).
- Если что-то не так — фиксирую в этом файле и в отчёте.

## 4. Типичные ошибки (запрещено)
- Игнорировать готовые HTML/CSS → **нельзя**.
- Писать стили/структуру “по памяти” → **нельзя**.
- Пропускать инструкции/доки перед стартом → **нельзя**.
- Оставлять неподтверждённые предположения в коде/ответах → **нельзя**.

## 5. Последовательность действий
1. Прочитать `C:\AI\yandex\бд\инструкции\Архитектура\Задачи\Новое\загрузка софта`.
2. Прочитать эту памятку.
3. Выбрать модуль → перенести исходники → настроить зависимости.
4. Проверить build + launcher.
5. Обновить `ГОТОВЫЕ_МОДУЛИ_план.md`.
5. После правок писать сюда отчет C:\AI\yandex\бд\инструкции\Архитектура\Задачи\Отчет\ЧТО УЖЕ СДЕЛАЛ.md
6. Проверить заново эту памятку перед сдачей задачи.

# КРИТИЧНО: НЕ ОСТАНАВЛИВАЙСЯ

1. НЕ ПИШИ "Finished working"
2. НЕ СПРАШИВАЙ "что дальше?"
3. НЕ ОТЧИТЫВАЙСЯ после каждого шага
4. ПРОСТО ДЕЛАЙ ЗАДАЧУ ДО КОНЦА

Если нужна помощь — я сам спрошу.



что приоритет — перенос существующих модулей из keyset/, а не переписывание. Конкретно:

Никаких новых “data API” с нуля – нужно заворачивать уже готовые функции из keyset/core/db.py, keyset/services/accounts.py, keyset/services/wordstat_bridge.py и т.д. в тонкие адаптеры FastAPI. Любой код, который я добавляю, должен быть лишь «прокладкой», а не новой реализацией логики.

Фронт должен дергать эти готовые API и отображать данные, не дублируя обработку (логику загрузки, каскады, шорткаты и т.п. уже есть в старых проектах).

Geo-дерево/частотка – берём regions_tree_full.json и внутренние сервисы, переносим без изменений.

Причина жёсткой критики – я действительно начал писать новые файлы. Это противоречит заданию: надо быстрее просто «раскидать» готовые модули и связать их.

Как работаю дальше:

Стоп переписывать: вместо собственных /api/data и больших переписанных сто́ров буду прямо оборачивать функции из keyset/.
Для того, что уже написал, приведу к минимальному «адаптеру» и, где возможно, заменю на прямое использование готовых модулей (например, импорт методов из keyset.core.db в роутер, а не писать свою выборку).
Каждый следующий шаг — только перенос и интеграция существующего кода.

Я давал тебе четкие инструкции чтобы ты перенес  всю рабочую логику, уже рабочие сука функции из других папок сука в нашу папку и чтобы ты не ебался и не писал код по новой а  просто подключил то что уже работает. ТВОЯ ЗАДАЧА БРАТЬ  ГОТОВЫЕ МОДУЛИ ОТ СЮДА C:\AI\yandex\KeySet-MVP\keyset И С ДРУГИХ ПАПОК ГДЕ НАХОДИТСЯ БД И ПРОЧАЯ НУЖНАЯ ДЛЯ СОФТА ХРЕНЬ И ЗАКИДЫВАТЬ ИХ СЮДА C:\AI\yandex\KeySet-MVP, ПОДКЛЮЧАТЬ И ЗАПУСКАТЬ РАБОЧИЙ СОФТ - Я ЗАПРЕЩАЮ ТЕБЕ ПЫТАТЬСЯ СВЯЗЫВАТЬ ФАЙЛЫ ИЗ ДРУГИХ ПАПОК - ЗАПОМНИ ЭТО. 

Перед стартом и перед сдачей читаю бд/инструкции/Архитектура/Задачи/Новое/загрузка софта/*.md и ПАМЯТКА_Codex.md. Выполняю шаги из памятки (перенос → build → launcher → отчёты) без промежуточных отчётов.
Работаю только в C:\AI\yandex\KeySet-MVP. Каталог keyset/ — как read-only исходник: оттуда копирую готовые файлы, но внутри него не правлю и не завожу новых путей/«доноров».
Копирую готовые модули: беру нужные файлы/папки из KeySet-MVP\keyset (и других legacy каталогов с БД/ресурсами), вставляю их прямо в структуру KeySet-MVP (например, services/, workers/, core/ и т.д.). Никаких прослоек legacy_ported больше не создаю.
Импорты переключаю на новые пути: после копирования правлю только места в основном проекте, чтобы они ссылались на новые копии (например, from services.frequency import ...). Все изменения — минимальные адаптеры, без переписывания логики.
Никаких новых функций/структур: запрещено «улучшать» код, писать альтернативы или «подкладывать» новые реализации. Всё уже работало — задача лишь перенести и подключить.
UTF-8 строго; не трогаю существующие файлы, если нет необходимости. Если файл уже присутствует в KeySet-MVP, только обновляю его для подключения перенесённого модуля.
Обязательные проверки после каждого блока правок:
npm run build в frontend.
python launcher.py (убедиться, что UI/модалки запускаются).
При необходимости — точечные тестовые скрипты, которые указаны в инструкциях.
Документация: обновляю docs/ГОТОВЫЕ_МОДУЛИ_план.md и бд/инструкции/.../ЧТО УЖЕ СДЕЛАЛ.md по факту выполненной работы.
Git: добавляю только новые перенесённые файлы и необходимые правки, затем коммит/пуш на websetpro-blip/KeySet-MVP. Не трогаю чужие незакоммиченные изменения.
Никаких “завершено”/“что дальше?” — работаю до полного выполнения таска.