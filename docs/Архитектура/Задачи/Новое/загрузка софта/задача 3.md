Р—РђР”РђР§Рђ Р”Р›РЇ РљРћР”Р•РљРЎРђ (РјРёРЅРёРјСѓРј РїСЂР°РІРѕРє, РІСЃС‘ РІ UTF-8)

Р¦РµР»СЊ:
РџРµСЂРµРЅРµСЃС‚Рё СЂР°Р±РѕС‡РёРµ РјРѕРґСѓР»Рё РёР· C:\AI\yandex\KeySet-MVP\keyset\вЂ¦ РІ РєРѕСЂРµРЅСЊ РїСЂРѕРµРєС‚Р° С‚Р°Рє, С‡С‚РѕР±С‹ РЅРѕРІС‹Р№ UI (React) Рё FastAPI РїСЂРѕРґРѕР»Р¶Р°Р»Рё СЂР°Р±РѕС‚Р°С‚СЊ Р±РµР· РёР·РјРµРЅРµРЅРёСЏ Р»РѕРіРёРєРё РїР°СЂСЃРµСЂР°/Р“Р•Рћ/Р‘Р”. РџРѕРєР° РЅРёС‡РµРіРѕ РЅРµ СѓРґР°Р»СЏРµРј.

0) РћРіСЂР°РЅРёС‡РµРЅРёСЏ

РќРµ РїРµСЂРµРїРёСЃС‹РІР°С‚СЊ РєРѕРґ РїР°СЂСЃРµСЂР° Рё СЃРµСЂРІРёСЃРѕРІ вЂ” С‚РѕР»СЊРєРѕ РїРµСЂРµРЅРѕСЃ Рё С‚РѕРЅРєРёРµ Р°РґР°РїС‚РµСЂС‹.

Р’СЃРµ РґРµР№СЃС‚РІРёСЏ РІРЅСѓС‚СЂРё C:\AI\yandex\KeySet-MVP.

РќРёРєР°РєРёС… РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹С… В«РїРѕРґРїСЂРѕРµРєС‚РѕРІВ» Рё В«Р±СѓС‚СЃС‚СЂР°РїРѕРІВ». РўРѕР»СЊРєРѕ РЅСѓР¶РЅС‹Рµ РєР°С‚Р°Р»РѕРіРё/С„Р°Р№Р»С‹.

1) Р§С‚Рѕ РїРµСЂРµРЅРѕСЃРёРј (1:1, Р±РµР· РїСЂР°РІРѕРє РІ СЃРѕРґРµСЂР¶РёРјРѕРј)

РЎРѕР·РґР°Р№ РЅРѕРІС‹Р№ РїР°РєРµС‚ РІ РєРѕСЂРЅРµ: app_core/ СЃРѕ СЃС‚СЂСѓРєС‚СѓСЂРѕР№, Р·РµСЂРєР°Р»СЊРЅРѕ РєР°Рє РІ keyset/:

app_core/
  core/
    db.py
    app_paths.py
  services/
    accounts.py
    frequency.py
    wordstat_bridge.py
    turbo_parser_improved.py   # РµСЃР»Рё Р»РµР¶РёС‚ РІ РєРѕСЂРЅРµ keyset вЂ” РїРѕР»РѕР¶Рё СЃСЋРґР°
  data/
    regions_tree_full.json


РљРѕРїРёСЂСѓР№ С‚РѕР»СЊРєРѕ РЅСѓР¶РЅС‹Рµ СЂР°Р±РѕС‡РёРµ С„Р°Р№Р»С‹ (РєРѕС‚РѕСЂС‹Рµ СЂРµР°Р»СЊРЅРѕ РІС‹Р·С‹РІР°СЋС‚СЃСЏ РёР· backend/routers). РќРёС‡РµРіРѕ Р»РёС€РЅРµРіРѕ.

2) РРјРїРѕСЂС‚РЅС‹Р№ В«С€РѕРІВ» (РІСЂРµРјРµРЅРЅС‹Р№, С‡С‚РѕР±С‹ РЅРёС‡РµРіРѕ РЅРµ СЃР»РѕРјР°С‚СЊ)

Р”РѕР±Р°РІСЊ С‚РѕРЅРєРёР№ Р°РґР°РїС‚РµСЂ, С‡С‚РѕР±С‹ СЃС‚Р°СЂС‹Рµ РёРјРїРѕСЂС‚С‹ keyset.вЂ¦ РїСЂРѕРґРѕР»Р¶РёР»Рё СЂР°Р±РѕС‚Р°С‚СЊ:

keyset/__init__.py               -> from app_core import *
keyset/services/__init__.py      -> from app_core.services import *
keyset/core/__init__.py          -> from app_core.core import *

3) РћР±РЅРѕРІРёС‚СЊ РёРјРїРѕСЂС‚С‹ РІ API (СЃС‚СЂРѕРіРѕ С‚РѕС‡РµС‡РЅРѕ)

Р’ С„Р°Р№Р»Р°С… СЂРѕСѓС‚РµСЂРѕРІ РјРµРЅСЏРµРј РёРјРїРѕСЂС‚С‹ РЅР° РЅРѕРІС‹Р№ РїР°РєРµС‚:

backend/routers/accounts.py в†’ from app_core.services import accounts as accounts_service

backend/routers/data.py в†’ from app_core.services import frequency as frequency_service

backend/routers/wordstat.py в†’ from app_core.services import wordstat_bridge

Р’РЅСѓС‚СЂРё СЃР°РјРёС… СЃРµСЂРІРёСЃРѕРІ РЅРёС‡РµРіРѕ РЅРµ РјРµРЅСЏС‚СЊ.

4) РџСѓС‚Рё Рє Р‘Р”/РїСЂРѕС„РёР»СЏРј/Р“Р•Рћ вЂ” С†РµРЅС‚СЂР°Р»РёР·РѕРІР°РЅРЅРѕ

РСЃРїРѕР»СЊР·СѓРµРј РѕРґРёРЅ С„Р°Р№Р» РїСѓС‚РµР№ (РІРЅСѓС‚СЂРё РЅРѕРІРѕРіРѕ РїР°РєРµС‚Р°), С‡С‚РѕР±С‹ РІРµСЃСЊ РєРѕРґ СЃРјРѕС‚СЂРµР» РІ РєРѕСЂРµРЅСЊ РїСЂРѕРµРєС‚Р°, Р° РЅРµ РІ keyset/:

app_core/core/app_paths.py (РѕР±РЅРѕРІРёС‚СЊ С‚Р°Рє):

from __future__ import annotations
from pathlib import Path
import sys

def app_root() -> Path:
    if getattr(sys, "frozen", False):
        return Path(sys.executable).resolve().parent
    return Path(__file__).resolve().parents[2]  # РєРѕСЂРµРЅСЊ KeySet-MVP

VAR = app_root() / "var"        # РІСЃРµ СЂР°Р±РѕС‡РёРµ РґР°РЅРЅС‹Рµ С‚СѓС‚
DB_PATH = VAR / "db" / "keyset.db"
PROFILES_DIR = VAR / "profiles"
GEO_FILE = VAR / "data" / "regions_tree_full.json"

def ensure_layout():
    (VAR / "db").mkdir(parents=True, exist_ok=True)
    (VAR / "profiles").mkdir(parents=True, exist_ok=True)
    (VAR / "data").mkdir(parents=True, exist_ok=True)


app_core/core/db.py (РѕР±РЅРѕРІРёС‚СЊ С‚Р°Рє):

from sqlalchemy import create_engine
from app_core.core.app_paths import DB_PATH, ensure_layout
ensure_layout()
engine = create_engine(f"sqlite:///{DB_PATH.as_posix()}", connect_args={"check_same_thread": False})


РС‚РѕРі: РІСЃРµ СЂР°Р±РѕС‡РёРµ С„Р°Р№Р»С‹ (Р‘Р”, РїСЂРѕС„РёР»Рё, geo) Р¶РёРІСѓС‚ РІ KeySet-MVP\var\вЂ¦ вЂ” РІ РѕРґРЅРѕРј РјРµСЃС‚Рµ. РќРёРєР°РєРёС… СЃСЃС‹Р»РѕРє РЅР° keyset/ РІРЅСѓС‚СЂРё Р»РѕРіРёРєРё.

5) Р­РЅРґРїРѕРёРЅС‚С‹ РЅР° РЅРѕРІСѓСЋ С„Р°Р№Р»РѕРІСѓСЋ СЃС…РµРјСѓ

accounts.list С‡РёС‚Р°РµС‚ VAR/profiles (Р° РЅРµ keyset/.profiles).

data.regions С‡РёС‚Р°РµС‚ VAR/data/regions_tree_full.json.

data/phrases С‡РёС‚Р°РµС‚ Р‘Р” РёР· VAR/db/keyset.db (СЌС‚Рѕ СѓР¶Рµ РїСЂРёС…РѕРґРёС‚ С‡РµСЂРµР· app_core.core.db).

РћР±РЅРѕРІРё СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓСЋС‰РёРµ РїСѓС‚Рё РІ СЂРѕСѓС‚РµСЂР°С… РЅР° app_core.core.app_paths.

6) РЎР±РѕСЂРєР° PyInstaller (РѕРґРёРЅ .exe, РІСЃС‘ РІ РєРѕРјРїР»РµРєС‚Рµ)

build/keyset.spec вЂ” datas РјРёРЅРёРјСѓРј:

datas = [
  ('frontend/dist', 'www'),               # SPA
  ('var/data/regions_tree_full.json', 'var/data'),
  ('var/db/keyset.db', 'var/db'),         # РґРµС„РѕР»С‚РЅР°СЏ Р‘Р” РЅР° РїРµСЂРІС‹Р№ Р·Р°РїСѓСЃРє
  ('var/profiles', 'var/profiles'),       # РїСЂРё РЅРµРѕР±С…РѕРґРёРјРѕСЃС‚Рё
]
# Рё РѕР±СЏР·Р°С‚РµР»СЊРЅРѕ console=False + icon, windowed


Р’Р°Р¶РЅРѕ: РІ РєРѕРґРµ РјС‹ С‡РёС‚Р°РµРј РёР· var/..., РЅРµ РёР· keyset/.... Р—РЅР°С‡РёС‚, РІ СЂРµР»РёР·РЅРѕРј РїР°РєРµС‚Рµ РЅРµС‚ Р·Р°РІРёСЃРёРјРѕСЃС‚Рё РѕС‚ РїР°РїРєРё keyset/.

7) Р¤СЂРѕРЅС‚ РЅР° /api (Р±РµР· РїРѕСЂС‚РѕРІ Рё URL)

РџСЂРѕРІРµСЂСЊ РєР»РёРµРЅС‚: axios/fetch СЃ baseURL: "/api" Рё РїРµСЂРµСЃРѕР±РµСЂРё Vite.

8) РўРµСЃС‚-РїР»Р°РЅ (Р±С‹СЃС‚СЂРѕ)

npm run build (frontend)

py -m PyInstaller -y build\keyset.spec

dist\KeySet\KeySet.exe

/api/health в†’ 200

/api/accounts в†’ РїР°РїРєРё РёР· var\profiles\вЂ¦

/api/data/phrases в†’ СЃС‚СЂРѕРєРё РёР· var\db\keyset.db

РІРєР»Р°РґРєРё В«РђРєРєР°СѓРЅС‚С‹/Р”Р°РЅРЅС‹РµВ» РЅРµ РїСѓСЃС‚С‹Рµ

РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ: POST /api/parsing/start РґРµСЂРіР°РµС‚ app_core.services.turbo_parser_improved (С‚РѕРЅРєР°СЏ РѕР±С‘СЂС‚РєР°; РёРјРїРѕСЂС‚ С‡РµСЂРµР· app_core)

РџРѕСЏСЃРЅРµРЅРёРµ, Р·Р°С‡РµРј С‚Р°Рє

РќРёС‡РµРіРѕ РЅРµ Р»РѕРјР°РµРј: РєРѕРґ РёР· keyset РЅРµ РїРµСЂРµРїРёСЃС‹РІР°РµРј вЂ” РїСЂРѕСЃС‚Рѕ РєРѕРїРёСЂСѓРµРј РІ app_core.

Р•РґРёРЅР°СЏ С‚РѕС‡РєР° РґР°РЅРЅС‹С…: РІСЃС‘ Р¶РёРІС‘С‚ РІ var/вЂ¦ (Р‘Р”/РїСЂРѕС„РёР»Рё/GEO) вЂ” РѕРґРЅР° РїР°РїРєР°, РєР°Рє С‚С‹ Рё РїСЂРѕСЃРёР».

РќРµС‚ В«Р»РµРІРѕРіРѕ РјСѓСЃРѕСЂР°В»: РЅРёРєР°РєРёС… РЅРѕРІС‹С… РїРѕРґ-РїСЂРѕРµРєС‚РѕРІ, С‚РѕР»СЊРєРѕ app_core.

РџРµСЂРµРЅРµСЃС‚Рё СЂР°Р±РѕС‡РёРµ РјРѕРґСѓР»Рё РёР· keyset/ РІ РєРѕСЂРµРЅСЊ РїСЂРѕРµРєС‚Р° (РІ РµРґРёРЅСЃС‚РІРµРЅРЅС‹Р№ РЅРѕРІС‹Р№ РїР°РєРµС‚ app_core/), СЃРѕС…СЂР°РЅРёРІ РІСЃСЋ Р±РёР·РЅРµСЃ-Р»РѕРіРёРєСѓ. РќРёРєР°РєРёС… РїРµСЂРµРїРёСЃС‹РІР°РЅРёРё Р»РѕРіРёРєРё: РїСЂРѕСЃС‚Рѕ РїРµСЂРµРЅРѕСЃ Рё С‚РѕРЅРєРёРµ Р°РґР°РїС‚РµСЂС‹. Р’СЃРµ РїСѓС‚Рё Рє Р‘Р”/РїСЂРѕС„РёР»СЏРј/Р“Р•Рћ вЂ” РІ РѕРґРЅРѕРј РјРµСЃС‚Рµ (var/).

Р§С‚Рѕ РґРµР»Р°РµРј (РјРёРЅРёРјСѓРј С„Р°Р№Р»РѕРІ)
1) РџРµСЂРµРЅРѕСЃ РєРѕРґР° (1:1, Р±РµР· РёР·РјРµРЅРµРЅРёСЏ СЃРѕРґРµСЂР¶РёРјРѕРіРѕ)

РЎРѕР·РґР°С‚СЊ РѕРґРёРЅ РЅРѕРІС‹Р№ РїР°РєРµС‚ РІ РєРѕСЂРЅРµ РїСЂРѕРµРєС‚Р°:

C:\AI\yandex\KeySet-MVP\app_core\
  core\
    db.py
    app_paths.py
  services\
    accounts.py
    frequency.py
    wordstat_bridge.py
    turbo_parser_improved.py   # РµСЃР»Рё Р±С‹Р» РІ keyset/
  data\
    regions_tree_full.json     # РµСЃР»Рё С‚СЂРµР±СѓРµС‚СЃСЏ РІ СЂР°РЅС‚Р°Р№РјРµ


РЎРєРѕРїРёСЂРѕРІР°С‚СЊ СЃСЋРґР° С‚РѕР»СЊРєРѕ СЂРµР°Р»СЊРЅРѕ РёСЃРїРѕР»СЊР·СѓРµРјС‹Рµ С„Р°Р№Р»С‹ РёР· keyset/ (С‚Рµ, С‡С‚Рѕ РґРµСЂРіР°СЋС‚ СЂРѕСѓС‚РµСЂС‹ backend).

2) Р’СЂРµРјРµРЅРЅС‹Р№ Р°РґР°РїС‚РµСЂ, С‡С‚РѕР±С‹ РЅРёС‡РµРіРѕ РЅРµ РїР°РґР°Р»Рѕ

РћСЃС‚Р°РІР»СЏРµРј keyset/ РєР°Рє РµСЃС‚СЊ, РЅРѕ РєР»Р°РґС‘Рј РїРѕ РѕРґРЅРѕРјСѓ РїСѓСЃС‚РѕРјСѓ __init__.py, РєРѕС‚РѕСЂС‹Рµ РїРµСЂРµРЅР°РїСЂР°РІР»СЏСЋС‚ РёРјРїРѕСЂС‚С‹ РЅР° РЅРѕРІС‹Р№ РїР°РєРµС‚:

keyset/__init__.py               ->  from app_core import *
keyset/services/__init__.py      ->  from app_core.services import *
keyset/core/__init__.py          ->  from app_core.core import *


Р­С‚Рѕ РЅСѓР¶РЅРѕ С‚РѕР»СЊРєРѕ РЅР° РІСЂРµРјСЏ РїРµСЂРµРЅРѕСЃР°, С‡С‚РѕР±С‹ СЃС‚Р°СЂС‹Рµ РёРјРїРѕСЂС‚С‹ РЅРµ РїР°РґР°Р»Рё РґРѕ РїРѕР»РЅРѕРіРѕ РїРµСЂРµС…РѕРґР°.

3) Р•РґРёРЅР°СЏ СЃС…РµРјР° РїСѓС‚РµР№ (РІ РѕРґРЅРѕРј РјРµСЃС‚Рµ)

Р’ РЅРѕРІРѕРј app_core/core/app_paths.py РѕРїРёСЃС‹РІР°РµРј РµРґРёРЅСѓСЋ РґРёСЂРµРєС‚РѕСЂРёСЋ РґР°РЅРЅС‹С… РїСЂРѕРµРєС‚Р° var/ Рё РіР°СЂР°РЅС‚РёСЂСѓРµРј РµС‘ СЃС‚СЂСѓРєС‚СѓСЂСѓ:

from __future__ import annotations
from pathlib import Path
import sys

def APP_ROOT() -> Path:
    return Path(sys.executable).parent if getattr(sys, "frozen", False) \
           else Path(__file__).resolve().parents[2]

VAR_DIR      = APP_ROOT() / "var"
DB_FILE      = VAR_DIR / "db" / "keyset.db"
PROFILES_DIR = VAR_DIR / "profiles"
GEO_FILE     = VAR_DIR / "data" / "regions_tree_full.json"

def ensure_layout():
    (VAR_DIR / "db").mkdir(parents=True, exist_ok=True)
    (VAR_DIR / "profiles").mkdir(parents=True, exist_ok=True)
    (VAR_DIR / "data").mkdir(parents=True, exist_ok=True)

def sync_legacy_once():
    """Р‘РµР· В«Р±СѓС‚СЃС‚СЂР°РїРѕРІВ»: Р»С‘РіРєР°СЏ РѕРґРЅРѕСЂР°Р·РѕРІР°СЏ СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ РїСЂСЏРјРѕ РёР· СЌС‚РѕРіРѕ РјРѕРґСѓР»СЏ."""
    ensure_layout()
    # 1) Р‘Р”: РїСЂРёРѕСЂРёС‚РµС‚ dist\keyset.db, Р·Р°С‚РµРј keyset\keyset.db
    for candidate in [APP_ROOT() / "dist" / "keyset.db", APP_ROOT() / "keyset" / "keyset.db"]:
        if candidate.exists():
            if not DB_FILE.exists() or candidate.stat().st_mtime > DB_FILE.stat().st_mtime:
                DB_FILE.write_bytes(candidate.read_bytes())
            break
    # 2) GEO: СЃРєРѕРїРёСЂРѕРІР°С‚СЊ, РµСЃР»Рё РЅРµС‚
    legacy_geo = APP_ROOT() / "keyset" / "data" / "regions_tree_full.json"
    if legacy_geo.exists() and not GEO_FILE.exists():
        GEO_FILE.write_bytes(legacy_geo.read_bytes())
    # 3) РџСЂРѕС„РёР»Рё: РїРµСЂРІС‹Р№ РїРµСЂРµРЅРѕСЃ СЃС‚СЂСѓРєС‚СѓСЂС‹, Р±РµР· РїРµСЂРµРёРјРµРЅРѕРІР°РЅРёР№
    legacy_profiles = APP_ROOT() / "keyset" / ".profiles"
    if legacy_profiles.exists():
        for p in legacy_profiles.iterdir():
            if p.is_dir():
                dst = PROFILES_DIR / p.name
                if not dst.exists():
                    dst.mkdir(parents=True, exist_ok=True)
                    # РєРѕРїРёСЂСѓРµРј С‚РѕР»СЊРєРѕ С„Р°Р№Р»С‹ РІРµСЂС…РЅРµРіРѕ СѓСЂРѕРІРЅСЏ вЂ” Р±РµР· С‚СЏР¶С‘Р»С‹С… СЂРµРєСѓСЂСЃРёР№
                    for f in p.iterdir():
                        if f.is_file():
                            (dst / f.name).write_bytes(f.read_bytes())

4) РџРѕРґРєР»СЋС‡РµРЅРёРµ РїСѓС‚РµР№ Рё Р‘Р” (Р±РµР· РѕС‚РґРµР»СЊРЅС‹С… В«bootstrapВ»-С„Р°Р№Р»РѕРІ)

Р’ app_core/core/db.py:

from sqlalchemy import create_engine
from app_core.core.app_paths import DB_FILE, ensure_layout, sync_legacy_once

ensure_layout()
sync_legacy_once()  # в†ђ РІС‹Р·С‹РІР°РµРј Р·РґРµСЃСЊ, Р° РЅРµ РѕС‚РґРµР»СЊРЅС‹Рј В«Р±СѓС‚СЃС‚СЂР°РїРѕРјВ»
engine = create_engine(f"sqlite:///{DB_FILE.as_posix()}",
                       connect_args={"check_same_thread": False})


Р­С‚Рѕ РґР°С‘С‚ РЅР°Рј РѕРґРЅРѕ РјРµСЃС‚Рѕ, РіРґРµ СЃРѕР·РґР°С‘С‚СЃСЏ СЃС‚СЂСѓРєС‚СѓСЂР° var/ Рё РјСЏРіРєРѕ РїРѕРґС‚СЏРіРёРІР°РµС‚СЃСЏ Р¶РёРІР°СЏ Р‘Р”/Р“Р•Рћ/РїСЂРѕС„РёР»Рё вЂ” Р±РµР· РѕС‚РґРµР»СЊРЅС‹С… РјРѕРґСѓР»РµР№ Рё В«Р±СѓС‚СЃС‚СЂР°РїРѕРІВ».

5) Р РѕСѓС‚РµСЂС‹ backend РїРµСЂРµРєР»СЋС‡РёС‚СЊ РЅР° app_core

РўРѕС‡РµС‡РЅРѕ Р·Р°РјРµРЅРёС‚СЊ РёРјРїРѕСЂС‚С‹:

backend/routers/accounts.py:

from app_core.core.app_paths import PROFILES_DIR


(РµСЃР»Рё СЂР°РЅСЊС€Рµ С‡РёС‚Р°Р»Рё РёР· keyset/.profiles вЂ” С‡РёС‚Р°РµРј РёР· PROFILES_DIR)

backend/routers/data.py:

from app_core.core.app_paths import DB_FILE, GEO_FILE
# Рё/РёР»Рё from app_core.core.db import engine


backend/routers/wordstat.py:

from app_core.services import wordstat_bridge as wordstat_service
from app_core.services import frequency as frequency_service


Р•СЃР»Рё РЅСѓР¶РµРЅ СЃС‚Р°СЂС‚ РїР°СЂСЃРёРЅРіР°:

from app_core.services import turbo_parser_improved as turbo

6) SPA РёР· РѕРґРЅРѕРіРѕ origin

Р’ backend/main.py (РµСЃР»Рё РЅРµ СЃРґРµР»Р°РЅРѕ): СЂР°Р·РґР°С‘Рј С„СЂРѕРЅС‚ Рё API РёР· РѕРґРЅРѕРіРѕ origin:

from fastapi.staticfiles import StaticFiles
from pathlib import Path
import sys

def _spa_dir() -> Path:
    dev = Path(__file__).resolve().parents[1] / "frontend" / "dist"
    if dev.exists(): return dev
    if getattr(sys, "frozen", False):
        return Path(sys.executable).parent / "www"
    return dev

app.mount("/", StaticFiles(directory=str(_spa_dir()), html=True), name="static")


Р’Рѕ С„СЂРѕРЅС‚Рµ axios-РєР»РёРµРЅС‚ вЂ” С‚РѕР»СЊРєРѕ baseURL: "/api".

7) PyInstaller вЂ” РѕРґРёРЅ .exe, РІСЃС‘ СЂСЏРґРѕРј

Р’ .spec РґРѕР±Р°РІРёС‚СЊ РјРёРЅРёРјСѓРј:

datas = [
    ('frontend/dist', 'www'),                    # SPA
    ('var/db/keyset.db', 'var/db'),             # РґРµС„РѕР»С‚РЅР°СЏ Р‘Р” РЅР° РїРµСЂРІС‹Р№ Р·Р°РїСѓСЃРє
    ('var/data/regions_tree_full.json', 'var/data'),
    ('var/profiles', 'var/profiles'),           # РµСЃР»Рё РЅСѓР¶РЅРѕ
]
# + console=False, icon Рё С‚.Рґ.


Р’ СЂР°РЅС‚Р°Р№РјРµ РІСЃС‘ С‡РёС‚Р°РµС‚СЃСЏ РёР· var/вЂ¦. РџР°РїРєСѓ keyset/ РїСЂРѕРµРєС‚ Р±РѕР»СЊС€Рµ РЅРµ С‚СЂРѕРіР°РµС‚.

РљРѕСЂРѕС‚РєРёР№ С‡РµРє-Р»РёСЃС‚ РґР»СЏ Р·Р°РїСѓСЃРєР°

РЎРєРѕРїРёСЂРѕРІР°С‚СЊ С„Р°Р№Р»С‹ РёР· keyset/ РІ app_core/ (РєР°Рє СѓРєР°Р·Р°РЅРѕ).

РџРѕР»РѕР¶РёС‚СЊ Р°РґР°РїС‚РµСЂС‹ __init__.py РІ keyset/вЂ¦ (РїРµСЂРµРЅР°РїСЂР°РІР»РµРЅРёРµ РЅР° app_core).

РџРѕРјРµРЅСЏС‚СЊ РёРјРїРѕСЂС‚С‹ РІ СЂРѕСѓС‚РµСЂР°С… РЅР° app_core (3вЂ“4 РјРµСЃС‚Р°).

РЈР±РµРґРёС‚СЊСЃСЏ, С‡С‚Рѕ С„СЂРѕРЅС‚ Р±СЊС‘С‚ РЅР° /api.

РЎРѕР±СЂР°С‚СЊ:
cd frontend && npm run build && cd ..
py -m PyInstaller -y build\keyset.spec

Р—Р°РїСѓСЃС‚РёС‚СЊ dist\KeySet\KeySet.exe вЂ” РІРєР»Р°РґРєРё В«РђРєРєР°СѓРЅС‚С‹В»/В«Р”Р°РЅРЅС‹РµВ» РЅРµ РїСѓСЃС‚С‹Рµ.

РўР°Рє РјС‹:

РЅРµ РїР»РѕРґРёРј РЅРѕРІС‹Рµ СЃРµСЂРІРёСЃС‹/РјРѕРґСѓР»Рё,

РЅРµ РёСЃРїРѕР»СЊР·СѓРµРј СЃР»РѕРІРѕ В«Р±СѓС‚СЃС‚СЂР°РїВ» Рё РЅРµ СЃРѕР·РґР°С‘Рј РѕС‚РґРµР»СЊРЅС‹Рµ С„Р°Р№Р»С‹ СЂР°РґРё РёРЅРёС†РёР°Р»РёР·Р°С†РёРё,

РІСЃС‘ СЃРєР»Р°РґС‹РІР°РµРј РІ РѕРґРёРЅ РїР°РєРµС‚ app_core/ + var/ РґР»СЏ РґР°РЅРЅС‹С…,

РґР°С‘Рј РІРѕР·РјРѕР¶РЅРѕСЃС‚СЊ СЃРїРѕРєРѕР№РЅРѕ РїРµСЂРµР№С‚Рё РЅР° РЅРѕРІС‹Р№ РїР°РєРµС‚, РєРѕРіРґР° СѓР±РµРґРёС€СЊСЃСЏ, С‡С‚Рѕ РІСЃС‘ СЂР°Р±РѕС‚Р°РµС‚.

Р•СЃР»Рё С…РѕС‡РµС€СЊ вЂ” РјРѕРіСѓ РІС‹РґР°С‚СЊ С‚РѕС‡РЅС‹Рµ diff-РІСЃС‚Р°РІРєРё РїРѕ С„Р°Р№Р»Р°Рј, С‡С‚РѕР±С‹ РєРѕРґРµРєСЃ РїСЂРѕСЃС‚Рѕ РїСЂРёРјРµРЅРёР» РїР°С‚С‡Рё Р±РµР· СЂР°СЃСЃСѓР¶РґРµРЅРёР№.
