# –û—Ç—á–µ—Ç –ø–æ –∑–∞–¥–∞—á–µ 4: –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã KeySet-MVP

## –ó–ê–î–ê–ß–ê –í–´–ü–û–õ–ù–ï–ù–ê ‚úÖ

### –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ:
–£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –º–æ–¥—É–ª–∏ –∏–∑ `keyset/` –≤ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É `core/` –∏ `services/` –≤ –∫–æ—Ä–Ω–µ `KeySet-MVP/`. Backend —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞. Launcher –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î.

---

## –ß–¢–û –°–î–ï–õ–ê–ù–û:

### 1. ‚úÖ –ê–Ω–∞–ª–∏–∑ –∏–º–ø–æ—Ä—Ç–æ–≤ (–ø.1 –∏–∑ –∑–∞–¥–∞—á–∏ 4)

**–ù–∞–π–¥–µ–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã keyset –≤ backend:**
- `backend/main.py`: `from keyset.core.db`, `from keyset.core.app_paths`
- `backend/routers/accounts.py`: `from keyset.services import accounts`
- `backend/routers/data.py`: `from keyset.services import frequency`
- `backend/routers/wordstat.py`: `from keyset.services import accounts, frequency, wordstat_bridge`

**launcher.py**: –∏–º–ø–æ—Ä—Ç–æ–≤ keyset –ù–ï–¢ ‚úì

---

### 2. ‚úÖ –ü–µ—Ä–µ–Ω–æ—Å –º–æ–¥—É–ª–µ–π (–ø.2 –∏–∑ –∑–∞–¥–∞—á–∏ 4)

**–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥—É–ª–∏:**

**–ò–∑ keyset/core/ ‚Üí core/:**
- `__init__.py`
- `app_paths.py`
- `db.py` (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø—É—Ç–∏ –∫ –ë–î)
- `icons.py`
- `models.py`
- `playwright_config.py`
- `proxy_store.py`
- `regions.py`
- `settings.py`
- `xmind_parser.py`

**–ò–∑ keyset/services/ ‚Üí services/:**
- `__init__.py`
- `accounts.py` (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–æ–≤)
- `frequency.py` (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–æ–≤)
- `wordstat_bridge.py`
- `proxy_manager.py` (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–æ–≤)
- `chrome_launcher.py`

**–ò–∑ keyset/utils/ ‚Üí utils/:**
- `__init__.py`
- `proxy.py`
- `text_fix.py`

**–°—Ç–∞—Ä–∞—è –ø–∞–ø–∫–∞ keyset/ –ù–ï —É–¥–∞–ª–µ–Ω–∞** (—Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø.2)

---

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ (–ø.3 –∏–∑ –∑–∞–¥–∞—á–∏ 4)

**–í backend/main.py:**
```python
from keyset.core.db import ensure_schema
‚Üí from core.db import ensure_schema

from keyset.core.app_paths import WWW_DIR, ensure_runtime, bootstrap_files, APP_ROOT
‚Üí from core.app_paths import WWW_DIR, ensure_runtime, bootstrap_files, APP_ROOT
```

**–í backend/routers/accounts.py:**
```python
from keyset.services import accounts as legacy_accounts
‚Üí from services import accounts as legacy_accounts
```

**–í backend/routers/data.py:**
```python
from keyset.services import frequency as frequency_service
‚Üí from services import frequency as frequency_service
```

**–í backend/routers/wordstat.py:**
```python
from keyset.services import accounts, frequency, wordstat_bridge
‚Üí from services import accounts, frequency, wordstat_bridge
```

**–í–Ω—É—Ç—Ä–∏ services/accounts.py:**
```python
from ..core.db import SessionLocal
from ..core.models import Account
from ..utils.proxy import proxy_to_playwright
from ..utils.text_fix import fix_mojibake
‚Üí from core.db import SessionLocal
‚Üí from core.models import Account
‚Üí from utils.proxy import proxy_to_playwright
‚Üí from utils.text_fix import fix_mojibake
‚Üí from services.proxy_manager import ProxyManager
‚Üí from services.chrome_launcher import ChromeLauncher
```

**–í–Ω—É—Ç—Ä–∏ services/frequency.py:**
```python
from ..core.db import SessionLocal, get_db_connection
from ..core.models import FrequencyResult
‚Üí from core.db import SessionLocal, get_db_connection
‚Üí from core.models import FrequencyResult
```

**–í–Ω—É—Ç—Ä–∏ services/proxy_manager.py:**
```python
from ..utils.proxy import proxy_to_playwright
from ..core.db import SessionLocal
from ..core.models import Account
‚Üí from utils.proxy import proxy_to_playwright
‚Üí from core.db import SessionLocal
‚Üí from core.models import Account
```

---

### 4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ PyInstaller spec (–ø.4 –∏–∑ –∑–∞–¥–∞—á–∏ 4)

**–§–∞–π–ª: build/keyset.spec**

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `collect_keyset()` ‚Üí `collect_package(package_name)` –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –≤ datas:
  ```python
  datas=[
      (str(PROJECT_ROOT / 'frontend' / 'dist'), 'frontend/dist'),
      (str(PROJECT_ROOT / 'backend'), 'backend'),
      *collect_package('core'),        # ‚Üê –ù–û–í–û–ï
      *collect_package('services'),    # ‚Üê –ù–û–í–û–ï
      *collect_package('utils'),       # ‚Üê –ù–û–í–û–ï (–Ω–µ—è–≤–Ω–æ)
      *collect_package('keyset'),      # –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  ],
  ```

---

### 5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ –ë–î

**–§–∞–π–ª: core/db.py (—Å—Ç—Ä–æ–∫–∏ 18-32)**

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—É—Ç–∏ –∫ –ë–î —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º `dist/keyset.db`:
```python
def _db_path() -> Path:
    # 1) –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ –∏–∑ exe, –±–µ—Ä–µ–º –ë–î —Ä—è–¥–æ–º —Å exe
    if getattr(sys, "frozen", false):
        p = Path(sys.executable).resolve().parent / "keyset.db"
        if p.exists():
            return p
    # 2) –í dev-—Ä–µ–∂–∏–º–µ: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç dist/keyset.db (270 KB —Å –¥–∞–Ω–Ω—ã–º–∏)
    dist_db = Path(__file__).resolve().parent.parent / "dist" / "keyset.db"
    if dist_db.exists():
        return dist_db
    # 3) Fallback: KeySet-MVP/keyset.db (–ø—É—Å—Ç–∞—è)
    proj_db = Path(__file__).resolve().parent.parent / "keyset.db"
    return proj_db

DB_PATH = _db_path()
DATABASE_URL = f"sqlite:///{DB_PATH.as_posix()}"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ–ø–µ—Ä—å backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é –ë–î `dist/keyset.db` (270 KB) –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ–π `keyset/keyset.db` (0 bytes)

---

### 6. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø.5 –∏–∑ –∑–∞–¥–∞—á–∏ 4)

**–ó–∞–ø—É—Å–∫ launcher.py:**
```
[DEBUG] Running from Python (dev mode)
[launcher] Starting backend on http://127.0.0.1:51485 ...
[DEBUG] OK backend.main imported successfully
INFO: Application startup complete.
[launcher] Browser window started. Close it to exit KeySet.
```
‚úÖ Launcher –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:**

`GET /api/accounts`:
```json
[
  {
    "id": 1,
    "email": "dsmismirnov",
    "profilePath": "C:/AI/yandex/.profiles/wordstat_main",
    "status": "active",
    "proxy": "77.73.134.166:8000",
    "authStatus": "–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"
  },
  {
    "id": 3,
    "email": "kuznepetya",
    "profilePath": "C:/AI/yandex/.profiles/kuznepetya",
    "status": "active"
  }
]
```
‚úÖ –í–∫–ª–∞–¥–∫–∞ "–ê–∫–∫–∞—É–Ω—Ç—ã" –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

`GET /api/data/phrases?limit=2`:
```json
{
  "items": [
    {
      "id": 4,
      "phrase": "–∫—É–ø–∏—Ç—å –æ–∫–Ω–∞",
      "ws": 0,
      "freq": 0,
      "status": "error",
      "region": 225
    },
    {
      "id": 3,
      "phrase": "—Ç–µ—Å—Ç–æ–≤–∞—è —Ñ—Ä–∞–∑–∞",
      "ws": 123,
      "freq": 123,
      "status": "ok",
      "region": 225
    }
  ],
  "nextCursor": 3
}
```
‚úÖ –í–∫–ª–∞–¥–∫–∞ "–î–∞–Ω–Ω—ã–µ" –ø–æ–ª—É—á–∞–µ—Ç —Ñ—Ä–∞–∑—ã –∏–∑ –ë–î

---

## –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê (–ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞):

```
KeySet-MVP/
‚îú‚îÄ‚îÄ core/                       ‚Üê –ù–û–í–û–ï (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ keyset/core/)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ app_paths.py
‚îÇ   ‚îú‚îÄ‚îÄ db.py                  (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îî‚îÄ‚îÄ ... (–µ—â–µ 8 —Ñ–∞–π–ª–æ–≤)
‚îÇ
‚îú‚îÄ‚îÄ services/                   ‚Üê –ù–û–í–û–ï (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ keyset/services/)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ accounts.py            (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ frequency.py           (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ proxy_manager.py       (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ wordstat_bridge.py
‚îÇ   ‚îî‚îÄ‚îÄ chrome_launcher.py
‚îÇ
‚îú‚îÄ‚îÄ utils/                      ‚Üê –ù–û–í–û–ï (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ keyset/utils/)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ proxy.py
‚îÇ   ‚îî‚îÄ‚îÄ text_fix.py
‚îÇ
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                (–∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: core.db, core.app_paths)
‚îÇ   ‚îî‚îÄ‚îÄ routers/
‚îÇ       ‚îú‚îÄ‚îÄ accounts.py        (–∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: services.accounts)
‚îÇ       ‚îú‚îÄ‚îÄ data.py            (–∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: services.frequency)
‚îÇ       ‚îî‚îÄ‚îÄ wordstat.py        (–∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: services.*)
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ dist/                  (React UI)
‚îÇ
‚îú‚îÄ‚îÄ build/
‚îÇ   ‚îî‚îÄ‚îÄ keyset.spec            (–æ–±–Ω–æ–≤–ª–µ–Ω: –¥–æ–±–∞–≤–ª–µ–Ω—ã core, services, utils)
‚îÇ
‚îú‚îÄ‚îÄ dist/
‚îÇ   ‚îú‚îÄ‚îÄ KeySet.exe             (98.5 MB)
‚îÇ   ‚îî‚îÄ‚îÄ keyset.db              (270 KB - –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –ë–î)
‚îÇ
‚îú‚îÄ‚îÄ keyset/                     ‚Üê –°–¢–ê–†–û–ï (–ù–ï —É–¥–∞–ª–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–æ —Ñ–∏–Ω–∞–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ       ‚îú‚îÄ‚îÄ keyset.db          (0 bytes - –ø—É—Å—Ç–∞—è)
‚îÇ       ‚îî‚îÄ‚îÄ regions_tree_full.json
‚îÇ
‚îî‚îÄ‚îÄ launcher.py                 (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
```

---

## –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

**–ø.6 –∏–∑ –∑–∞–¥–∞—á–∏ 4 - –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run build` –≤ frontend (–µ—Å–ª–∏ UI –∏–∑–º–µ–Ω–∏–ª—Å—è)
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `build.ps1` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è exe
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `dist/KeySet.exe` —Å—Ç–∞—Ä—Ç—É–µ—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
4. –ü–û–°–õ–ï —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ - —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ø–∞–ø–∫—É `keyset/`

**–í–ê–ñ–ù–û:** –ü–∞–ø–∫–∞ `keyset/` –ø–æ–∫–∞ –ù–ï —É–¥–∞–ª–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø.2 –∑–∞–¥–∞—á–∏ 4 ("–ù–ï —É–¥–∞–ª—è–π –ø–æ–∫–∞ —Å—Ç–∞—Ä—É—é –ø–∞–ø–∫—É keyset").

---

## –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:

**–ë–î:**
- –ü—É—Ç—å: `C:\AI\yandex\KeySet-MVP\dist\keyset.db`
- –†–∞–∑–º–µ—Ä: 270 336 bytes (270 KB)
- –°–æ–¥–µ—Ä–∂–∏—Ç: —Ç–∞–±–ª–∏—Ü—ã accounts, freq_results, frequencies, groups, proxies, tasks

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ Backend –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏ –∏–∑ core/, services/, utils/ –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ API /api/accounts –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 2+ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏–∑ –ë–î
- ‚úÖ API /api/data/phrases –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—Ä–∞–∑—ã —Å —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å—é
- ‚úÖ UI –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Edge --app mode
- ‚úÖ –í—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (JS/CSS) –æ—Ç–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:**
1. ‚ùå "no such table: accounts" ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ –ë–î –≤ core/db.py
2. ‚ùå –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã `from ..core` ‚Üí ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `from core`
3. ‚ùå PyInstaller spec –Ω–µ –≤–∫–ª—é—á–∞–ª –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã ‚Üí ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã core/, services/

---

## –í–´–í–û–î:

–ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã **–ó–ê–í–ï–†–®–ï–ù–ê**. Backend —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–æ–¥—É–ª—è–º–∏ –≤ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ (`core/`, `services/`, `utils/`). –í–∫–ª–∞–¥–∫–∏ "–ê–∫–∫–∞—É–Ω—Ç—ã" –∏ "–î–∞–Ω–Ω—ã–µ" –ø–æ–ª—É—á–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î. –ì–æ—Ç–æ–≤–æ –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–µ exe.

---

## 12.11.2025 ‚Äî –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–∫–ª–∞–¥–æ–∫ ¬´–ê–∫–∫–∞—É–Ω—Ç—ã¬ª –∏ ¬´–î–∞–Ω–Ω—ã–µ¬ª
- üîç –í—ã—è—Å–Ω–µ–Ω–æ, —á—Ç–æ React‚Äë–∫–ª–∏–µ–Ω—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–ª –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∂—ë—Å—Ç–∫–æ –∑–∞—à–∏—Ç–æ–º—É `http://127.0.0.1:8765` (—Ñ–∞–π–ª `frontend/src/lib/apiClient.ts:1-16`), —Ç–æ–≥–¥–∞ –∫–∞–∫ launcher –≤—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç (–ø—Ä–∏–º–µ—Ä: 58067). –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã /api/accounts –∏ /api/data/phrases —É—Ö–æ–¥–∏–ª–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ—Ä—Ç –∏ UI –æ—Å—Ç–∞–≤–∞–ª—Å—è –ø—É—Å—Ç—ã–º.
- ‚úèÔ∏è –û–±–Ω–æ–≤–∏–ª `apiClient`: —Ç–µ–ø–µ—Ä—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `VITE_API_BASE_URL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π `window.location.origin`, –∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –≤ .exe –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Ç–æ—Ç –∂–µ origin, —á—Ç–æ –∏ —Å—Ç–∞—Ç–∏–∫–∞. –î–ª—è dev-—Å—Ü–µ–Ω–∞—Ä–∏—è –º–æ–∂–Ω–æ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∑–∞–¥–∞—Ç—å VITE –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.
- ‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–∞ –≤–∫–ª–∞–¥–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ —Å —Ç–æ–≥–æ –∂–µ –ø–æ—Ä—Ç–∞, —á—Ç–æ –∏ backend, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫ PyInstaller/launcher.

## 12.11.2025 ‚Äî –°–±–æ—Ä–∫–∞ –∏ smoke-—Ç–µ—Å—Ç –ø–æ –∑–∞–¥–∞—á–µ 4
- `npm run build` (–≤ `frontend/`) —Å–æ–±—Ä–∞–ª —Å–≤–µ–∂–∏–π `frontend/dist` —É–∂–µ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º `apiClient`. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è Vite –æ —Ä–∞–∑–º–µ—Ä–µ –±–∞–Ω–¥–ª–∞ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏.
- `.\build.ps1` –ø–µ—Ä–µ—Å–æ–±—Ä–∞–ª PyInstaller onefile: `dist/KeySet.exe` ~48‚ÄØMB, datas/hiddenimports –ø—Ä–µ–∂–Ω–∏–µ. –õ–æ–≥–∏ build.ps1 —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª–∏.
- –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ `fastapi.testclient.TestClient`: `/api/health`, `/api/accounts`, `/api/data/phrases` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ SQLite (—Å–º. –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `python -c ...`). –≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ backend –∏ React-SPA —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–¥–Ω–æ–π –ë–î –∏ –æ–¥–Ω–∏–º origin ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –æ—Å—Ç–∞–≤—à–∏–º—Å—è —à–∞–≥–∞–º –∑–∞–¥–∞—á–∏ 4 (–¥–∞–ª—å–Ω–µ–π—à–∞—è –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è app_core –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ¬´–∑–∞–¥–∞–Ω–∏–µ 3¬ª).

## 13.11.2025 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ React error #185 –Ω–∞ –≤–∫–ª–∞–¥–∫–µ ¬´–î–∞–Ω–Ω—ã–µ¬ª
- –°–∏–º–ø—Ç–æ–º: –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π —á–µ—Ä–µ–∑ launcher —Ñ—Ä–æ–Ω—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–ª –≥—Ä—É–∑–∏—Ç—å—Å—è –∏–∑ `www/assets/index-B34d8OBy.js` + `vendor-*.js`, –∏–∑-–∑–∞ —Å—Ç–∞—Ä—ã—Ö —á–∞–Ω–∫–æ–≤ PyWebView –≤—ã–¥–∞–≤–∞–ª `Minified React error #185`.
- –ü—Ä–∏—á–∏–Ω–∞: `backend/main.py::_resolve_frontend_paths()` –≤—Å–µ–≥–¥–∞ –æ—Ç–¥–∞–≤–∞–ª `WWW_DIR`, –¥–∞–∂–µ –≤ dev-—Ä–µ–∂–∏–º–µ. –ü–∞–ø–∫–∞ `www/` —Å–æ–¥–µ—Ä–∂–∞–ª–∞ —Å—Ç–∞—Ä—ã–π build —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º code-splitting, –ø–æ—ç—Ç–æ–º—É –∞–∫—Ç—É–∞–ª—å–Ω—ã–π `frontend/dist` (–æ–¥–∏–Ω bundle) –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è.
- –†–µ—à–µ–Ω–∏–µ: —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–ª–∏—á–∞–µ—Ç —Ä–µ–∂–∏–º—ã ‚Äî –≤ dev –≤—Å–µ–≥–¥–∞ –±–µ—Ä—ë–º `frontend/dist`, –≤ frozen —Ä–µ–∂–∏–º–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É `_MEIPASS/frontend/dist` (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ –Ω–µ—Ç, –º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å —Å–±–æ—Ä–∫—É –≤ `www/`). –ü–æ—Å–ª–µ –ø—Ä–∞–≤–∫–∏ –¥–µ–≤-—Å–µ—Ä–≤–µ—Ä —Å—Ä–∞–∑—É –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å–≤–µ–∂–∏–π –±–∞–Ω–¥–ª; —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å `python launcher.py` (–ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ .exe –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è).


## 12.11.2025 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∞–∫–æ–∑—è–±—Ä (UTF-8 encoding) –≤ API responses

- üîç –í—ã—è–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: `/api/accounts` –≤–æ–∑–≤—Ä–∞—â–∞–ª –∫—Ä–∞–∫–æ–∑—è–±—Ä—ã –≤–º–µ—Å—Ç–æ —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (¬´–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω¬ª –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –∫–∞–∫ ¬´√ê√ê¬≤√ë√ê¬æ√ë√ê¬∏√ê¬∑√ê¬æ√ê¬≤√ê¬∞√ê¬Ω¬ª).
- üìç –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã: –í —Ñ–∞–π–ª–µ `backend/routers/accounts.py` —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã —Å —Ä—É—Å—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º (lines 75-84 –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_map_status`) –±—ã–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã.
- ‚úèÔ∏è –†–µ—à–µ–Ω–∏–µ:
  1. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `fix_encoding.py` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–∞.
  2. –°–∫—Ä–∏–ø—Ç —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª –∫–∞–∫ UTF-8 bytes –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Ä—É—Å—Å–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏.
  3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã: ¬´–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω¬ª, ¬´–í —Ä–∞–±–æ—Ç–µ¬ª, ¬´–¢—Ä–µ–±—É–µ—Ç—Å—è –∫–∞–ø—á–∞¬ª, ¬´–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω¬ª, ¬´–û—à–∏–±–∫–∞¬ª, ¬´–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ¬ª.
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
  - API response `/api/accounts` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π UTF-8: `authStatus: '–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω'`.
  - –ë–∞–π—Ç—ã UTF-8: `b'\xd0\x90\xd0\xb2\xd1\x82\xd0\xbe\xd1\x80\xd0\xb8\xd0\xb7\xd0\xbe\xd0\xb2\xd0\xb0\xd0\xbd'`.
  - –ë—Ä–∞—É–∑–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –≤ UI.
  - –ö–æ–Ω—Å–æ–ª—å Windows –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç mojibake –∏–∑-–∑–∞ cp1251, –Ω–æ —ç—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `backend/routers/accounts.py` (lines 75-84): –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã —Å —Ä—É—Å—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º
- `fix_encoding.py`: —Å–æ–∑–¥–∞–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∫–∏

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
resp = requests.get('http://127.0.0.1:57143/api/accounts')
data[0]['authStatus']  # Returns correct UTF-8: '–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω'
```
\n### 2025-11-12\n- –ü–µ—Ä–µ–Ω—ë—Å geo-–¥–∞–Ω–Ω—ã–µ Wordstat –≤ core/data –∏ –ø–æ–¥–∫–ª—é—á–∏–ª –∫ backend —á–µ—Ä–µ–∑ core.geo.regions, —Ç–µ–ø–µ—Ä—å /api/regions –∏ /api/wordstat/regions –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç –ø–æ–ª–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –†–§ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç keyset/.\n- –û–±–Ω–æ–≤–∏–ª WordstatModal –≤ React: –∞–∫–∫–∞—É–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–±–µ—Ä—ë—Ç—Å—è –ø–µ—Ä–≤—ã–π –∏–∑ legacy –±–∞–∑—ã), —É–±—Ä–∞–Ω —Ä—É—á–Ω–æ–π —Å–µ–ª–µ–∫—Ç, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏.\n- –ü—Ä–æ–≥–Ω–∞–ª python TestClient –¥–ª—è /api/regions –∏ /api/wordstat/regions + npm run build, —É–±–µ–¥–∏–ª—Å—è —á—Ç–æ —Ñ—Ä–æ–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤–æ–º API.
## 13. –ñ—É—Ä–Ω–∞–ª —Ä–∞–±–æ—Ç (12.11.2025 ‚Äî runtime –ë–î –∏ –ø—Ä–æ—Ñ–∏–ª–∏)
### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
- core/app_paths.py —Ç–µ–ø–µ—Ä—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –∏—â–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –≤ untime/{db|geo|config}, –∞ –∑–∞—Ç–µ–º –≤ core/data, legacy keyset/data –∏ bundled-–ø–∞–ø–∫–∞—Ö. –î–ª—è keyset.db –¥–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ dist/ –∏ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞, –ø–æ—ç—Ç–æ–º—É –∂–∏–≤–∞—è –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ untime/db.
- core/db.py –∂—ë—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ untime/db/keyset.db: –º–æ–¥—É–ª—å —Å–∞–º –≤—ã–∑—ã–≤–∞–µ—Ç ensure_runtime() –∏ ootstrap_files(), –±–µ—Ä—ë—Ç URL —á–µ—Ä–µ–∑ sqlite_url() –∏ –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç dist/*.db.
- services/chrome_launcher.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É—Ç–∏ –∏–∑ core.app_paths: APP_ROOT –≤–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–æ–≥–æ C:/AI/yandex, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ª–µ–∂–∞—Ç –≤ untime/proxy_extensions, –∞ –ø—Ä–æ—Ñ–∏–ª–∏ ‚Äî –≤ untime/profiles —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ä—ã—Ö –ø—É—Ç–µ–π .profiles/<account>.

### –ü—Ä–æ–≤–µ—Ä–∫–∏
- python -c "from core.db import SessionLocal, DB_PATH; print(DB_PATH)" ‚Üí C:\AI\yandex\KeySet-MVP\runtime\db\keyset.db (—Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).
- python -c "from fastapi.testclient import TestClient; from backend.main import app; c=TestClient(app); print(len(c.get('/api/regions').json()), len(c.get('/api/wordstat/regions').json()))" ‚Üí /api/regions –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 8 –∫–æ—Ä–Ω–µ–≤—ã—Ö —É–∑–ª–æ–≤, /api/wordstat/regions ‚Äî 1103 —Ä–µ–≥–∏–æ–Ω–∞ –∏–∑ untime/geo.
- python -c "from services.chrome_launcher import ChromeLauncher; print(ChromeLauncher._normalise_profile_path(None, 'demo'))" ‚Üí untime/profiles/demo, –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –ò—Ç–æ–≥
–í—Å–µ –∫–ª—é—á–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–ë–î, —Ä–µ–≥–∏–æ–Ω—ã, –∫–æ–Ω—Ñ–∏–≥–∏, –ø—Ä–æ—Ñ–∏–ª–∏) –∂–∏–≤—É—Ç –≤ untime/ —Ä—è–¥–æ–º —Å KeySet.exe, —á—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ñ—Ç–∞/ –ø–æ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏.
## 14. –ñ—É—Ä–Ω–∞–ª —Ä–∞–±–æ—Ç (12.11.2025 ‚Äî Wordstat/UI)
- –û—Å—Ç–∞–≤–∏–ª –≤ geo-–¥–µ—Ä–µ–≤–µ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω—ã –°–ù–ì: core/geo/regions.py —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç JSON –ø–æ ID 225/159/149, –∞ fallback DEFAULT_REGION_TREE –≤ ackend/routers/wordstat.py —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω.
- Wordstat Modal: —É–±—Ä–∞–Ω –≤—ã–±–æ—Ä –∞–∫–∫–∞—É–Ω—Ç–∞, –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ—Ä–∞–∑/—Ä–µ–≥–∏–æ–Ω–æ–≤/–Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π, –ø–æ—è–≤–∏–ª–∞—Å—å —Ç–µ–∫—Å—Ç–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª—é—á–µ–π (POST /api/data/phrases/enqueue). –ö–Ω–æ–ø–∫–∞ ¬´–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥¬ª –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç —Ñ—Ä–∞–∑ –∏–ª–∏ –∏–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∞.
- Backend: keyset/services/wordstat_ws.collect_frequency —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç TurboWordstatParser –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ syncio.gather, –≤–æ–∑–≤—Ä–∞—â–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø—Ä–µ–∂–Ω–µ–º —Ñ–æ—Ä–º–∞—Ç–µ. API collectWordstat –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç profile.
- –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ ¬´–†–æ—Å—Å–∏—è / –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω / –ë–µ–ª–∞—Ä—É—Å—å / –û—á–∏—Å—Ç–∏—Ç—å¬ª –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GeoRegionPicker, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –≤—ã–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–∞.

–ü—Ä–æ–≤–µ—Ä–∫–∏:
- python -c "from core.geo import load_region_tree; print([node['label'] for node in load_region_tree()])" ‚Üí —Ç—Ä–∏ —Å—Ç—Ä–∞–Ω—ã.
- python -c "from keyset.services import wordstat_ws; print(len(wordstat_ws.collect_frequency(['—Ç–µ—Å—Ç'], modes={'ws': True, 'qws': False, 'bws': False}, regions=[225], profile=None)))" ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç, –∑–∞–ø—É—Å–∫ –∏–¥—ë—Ç –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞.
- UI: –º–æ–¥–∞–ª–∫–∞ Wordstat –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–ª–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª—é—á–µ–π, –∫–Ω–æ–ø–∫–∏ —Å—Ç—Ä–∞–Ω –∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑.

## 15. –ñ—É—Ä–Ω–∞–ª —Ä–∞–±–æ—Ç (13.11.2025 ‚Äî —Ç—É—Ä–±–æ-–ø–∞—Ä—Å–µ—Ä –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –≤ –∫–æ—Ä–µ–Ω—å KeySet-MVP)
### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
- –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –±–æ–µ–≤—ã–µ –º–æ–¥—É–ª–∏ Wordstat/TurboParser –∏–∑ `keyset/` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç: `services/wordstat_ws.py`, `services/direct_batch.py`, `services/multiparser_manager.py`, `workers/turbo_parser_integration.py`, `workers/visual_browser_manager.py`, `workers/auto_auth_handler.py`. –í—Å–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ UTF-8, –∞ `workers/__init__.py` —Ç–µ–ø–µ—Ä—å –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –≤ legacy.
- `backend/routers/wordstat.py` –∏ `services/wordstat_bridge.py` –∏–∑–±–∞–≤–ª–µ–Ω—ã –æ—Ç `_import_module("keyset....")`: API `/api/wordstat/accounts|regions|collect|forecast` –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã (`services.accounts`, `services.frequency`, `services.wordstat_ws`, `services.direct_batch`).
- –í `workers/turbo_parser_integration.py` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã `core.app_paths.DB_DIR/CONFIG_DIR` ‚Äî TurboWordstatParser –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `runtime/db/keyset.db`, –∞ credentials –∏—â—É—Ç—Å—è –≤ `runtime/config/accounts.json` (—Å fallback –Ω–∞ —Å—Ç–∞—Ä—ã–µ –ø—É—Ç–∏). –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É —Ü–µ–ø–æ—á–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `C:/AI/yandex/keyset`.
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `services/__init__.py` (—ç–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π) –∏ `services/wordstat_bridge.py` (–æ–±—ë—Ä—Ç–∫–∞ `_try_call` –≤–º–µ—Å—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞, –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π forecast —á–µ—Ä–µ–∑ `direct_batch`).

### –ü—Ä–æ–≤–µ—Ä–∫–∏
- `python - <<script ...` (—Å–º. –ª–æ–≥) ‚Äî –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã `services.wordstat_ws`, `services.wordstat_bridge`, `workers.turbo_parser_integration` –±–µ–∑ –æ—à–∏–±–æ–∫.
- `npm run build` (frontend) ‚Üí ‚úÖ (Vite).
- `python launcher.py` ‚Üí ‚úÖ: backend —Å—Ç–∞—Ä—Ç—É–µ—Ç, UI –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, `/api/wordstat/regions` –æ—Ç–¥–∞—ë—Ç –¥–µ—Ä–µ–≤–æ, `/api/wordstat/collect` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–≤ –ª–æ–≥–µ `[TURBO] Persistent ...`, HTTP 200 –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü).

### –ò—Ç–æ–≥
TurboWordstatParser –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ `keyset/` ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–Ω—è `KeySet-MVP`, —á—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏ —Å–æ—Ñ—Ç–∞ ¬´–ø–æ–¥ –∫–ª—é—á¬ª.
