# 13. Security Notes KeySet-MVP

> **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –¥–æ—Å—Ç—É–ø—ã, –∑–∞—â–∏—Ç–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–¶–µ–ª—å](#—Ü–µ–ª—å)
- [–î–ª—è –∫–æ–≥–æ](#–¥–ª—è-–∫–æ–≥–æ)
- [–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã](#—Å–≤—è–∑–∞–Ω–Ω—ã–µ-–¥–æ–∫—É–º–µ–Ω—Ç—ã)
- [–ú–æ–¥–µ–ª—å —É–≥—Ä–æ–∑](#–º–æ–¥–µ–ª—å-—É–≥—Ä–æ–∑)
- [–î–∏–∞–≥—Ä–∞–º–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–¥–∏–∞–≥—Ä–∞–º–º–∞-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [–ö–æ–Ω—Ç—Ä–æ–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–∫–æ–Ω—Ç—Ä–æ–ª–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [–°–Ω–∏–ø–ø–µ—Ç—ã](#—Å–Ω–∏–ø–ø–µ—Ç—ã)
- [–¢–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏](#—Ç–∏–ø–æ–≤—ã–µ-–æ—à–∏–±–∫–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [TL;DR](#tldr)
- [–ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è](#—á–µ–∫-–ª–∏—Å—Ç-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è)

---

## –¶–µ–ª—å

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ KeySet-MVP: –∑–∞—â–∏—Ç–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î, –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ cookies, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏.

## –î–ª—è –∫–æ–≥–æ

- Security –∏–Ω–∂–µ–Ω–µ—Ä—ã
- Tech Lead
- Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏
- DevOps –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [02_AUTHENTICATION.md](./02_AUTHENTICATION.md) ‚Äî cookies –∏ –ø—Ä–æ—Ñ–∏–ª–∏
- [04_PROXY_CONNECTIONS.md](./04_PROXY_CONNECTIONS.md) ‚Äî –ø—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [12_PRODUCTION_WINDOWS_BUILD.md](./12_PRODUCTION_WINDOWS_BUILD.md) ‚Äî production —Å–±–æ—Ä–∫–∞
- [14_LOGGING_OBSERVABILITY.md](./14_LOGGING_OBSERVABILITY.md) ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –ú–æ–¥–µ–ª—å —É–≥—Ä–æ–∑

```mermaid
graph TD
    A[Assets] --> B[Cookies & Tokens]
    A --> C[Account Credentials]
    A --> D[SQLite Database]
    A --> E[Proxy Credentials]

    B --> F[Threat: Theft]
    C --> G[Threat: Brute Force]
    D --> H[Threat: Data Leak]
    E --> I[Threat: MitM]

    F --> J[Controls: Encryption]
    G --> K[Controls: Rate Limit]
    H --> L[Controls: Access Control]
    I --> M[Controls: TLS/Proxy Rotation]
```

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```mermaid
sequenceDiagram
    participant Dev as Developer
    participant Vault as Secrets Vault
    participant App as KeySet App
    participant DB as SQLite DB
    participant Logs as Logging System
    
    Dev->>Vault: request secrets
    Vault-->>Dev: scoped token
    Dev->>App: configure .env (limited access)
    App->>DB: encrypted connection (WAL + password)
    App->>Logs: send sanitized logs
    Logs-->>Dev: read-only viewing
    App->>Vault: refresh credentials
```

---

## –ö–æ–Ω—Ç—Ä–æ–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. Credentials
- –•—Ä–∞–Ω–∏—Ç—å –≤ `.env` —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
- –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã

### 2. Cookies & Profiles
- –®–∏—Ñ—Ä–æ–≤–∞—Ç—å storage_state
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ `.profiles`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DPAPI –Ω–∞ Windows –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–π

### 3. Database
- –í–∫–ª—é—á–∏—Ç—å WAL + busy_timeout
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ `keyset.db`
- –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞—Ç—å backup –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

### 4. Proxy & Network
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS/SOCKS5 –ø—Ä–æ–∫—Å–∏ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –ø–∞—Ä–æ–ª–µ–π
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö IP

### 5. Logging
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –í–∫–ª—é—á–∏—Ç—å audit trail (–∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–ª –ø–∞—Ä—Å–∏–Ω–≥)
- –•—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –Ω–µ –±–æ–ª–µ–µ 30 –¥–Ω–µ–π

---

## –°–Ω–∏–ø–ø–µ—Ç—ã

### –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```python
# —Ñ–∞–π–ª: backend/main.py:TBD-TBD
```

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ cookies

```python
# —Ñ–∞–π–ª: keyset/services/chrome_launcher.py:TBD-TBD
```

### –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤

```python
# —Ñ–∞–π–ª: TBD:TBD-TBD
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```python
# —Ñ–∞–π–ª: backend/routers/accounts.py:TBD-TBD
```

---

## –¢–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –û—à–∏–±–∫–∞: "–°–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.gitignore`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å secret scanning
- –†–æ—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ —É—Ç–µ—á–∫–µ

### ‚ùå –û—à–∏–±–∫–∞: "–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã"

**–†–µ—à–µ–Ω–∏–µ:**
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å firewall
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH tunnel –∏–ª–∏ VPN
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã (netstat)

### ‚ùå –û—à–∏–±–∫–∞: "–ü–ª–æ—Å–∫–∏–µ –ø–∞—Ä–æ–ª–∏"

**–†–µ—à–µ–Ω–∏–µ:**
- –í–∫–ª—é—á–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞—Ä–æ–ª–µ–π
- –•—Ä–∞–Ω–∏—Ç—å —Ö–µ—à–∏ –ø–∞—Ä–æ–ª–µ–π

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ `.env`

```bash
grep -v '^#' .env | grep -v '^$'
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```bash
icacls C:\AI\yandex\.profiles
```

### 3. –ê—É–¥–∏—Ç –ª–æ–≥–æ–≤

```bash
tail -f logs/security.log
```

---

## TL;DR

- **–°–µ–∫—Ä–µ—Ç—ã** ‚Äî —Ç–æ–ª—å–∫–æ –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **Cookies** ‚Äî —à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø
- **DB** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ backup
- **Proxy** ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Logging** ‚Äî –±–µ–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

- [ ] `.env` –Ω–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- [ ] –ü–∞–ø–∫–∞ `.profiles` –∑–∞—â–∏—â–µ–Ω–∞ –ø—Ä–∞–≤–∞–º–∏
- [ ] Cookies —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏
- [ ] Proxy –¥–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è
- [ ] –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã –æ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] Backup –ë–î –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
- [ ] –°–µ–∫—Ä–µ—Ç—ã —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- [ ] Security policy –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [ ] MFA –≤–∫–ª—é—á–µ–Ω –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ–¥—ë–Ω —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π security review

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-11-10

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** [14_LOGGING_OBSERVABILITY.md](./14_LOGGING_OBSERVABILITY.md) ‚Äî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å
