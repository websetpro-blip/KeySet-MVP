## Аккаунты — задачи по доработке вкладки

1. **Парсер прокси (боевой)**  
   - Реализовать рабочий парсер в `POST /api/proxies/parse` вместо демо‑генератора.  
   - Источники: fineproxy, proxyelite, htmlweb, advanced.name, proxy.market.  
   - Фильтры: протокол (HTTP/SOCKS5), страна.  
   - Сохранять прокси в БД через `services/proxy_manager.py`, без дублей, с логированием в общий журнал.

2. **Продвинутый fingerprint**  
   - Доработать вкладку «Fingerprint» (генерация отпечатка, пресеты, связь с запуском браузера).  
   - Добавить проверку отпечатка через CreepJS и запись результата в журнал.  
   - Согласовать, какие поля реально влияют на парсер/браузер (UA, часовой пояс, язык и т.п.).

3. **Рабочая вкладка «Капча»**  
   - Хранить сервис (RuCaptcha, 2Captcha, AntiCaptcha) и API‑ключ в extras аккаунта.  
   - Проверять баланс/статус через backend и показывать во вкладке.  
   - Использовать настройки капчи при парсинге/автологине (по договорённой схеме).

4. **Уведомления и валидация в менеджере прокси**  
   - Заменить `alert(...)` на нормальные уведомления (toast или аккуратные inline‑сообщения).  
   - Добавить минимальную валидацию действий: нельзя парсить без источников, нельзя тестировать/очищать без выбранных прокси и т.п.  
   - Все ключевые события писать и в нижний журнал.

5. **Клиентская валидация форм (аккуратная)**  
   - Проверка формата email при сохранении (user@domain.com).  
   - Проверка базового формата прокси (user:pass@ip:port или ip:port), без реального логина на почте/Яндексе.  
   - Не пытаться «валидировать» логин/пароль/секретный вопрос через реальный заход в почту — этим занимается запуск браузера и автологин.

6. **Менеджер прокси + консистентность аккаунтов**  
   - Доделать вкладку «Менеджер прокси» в `AccountSidebar.tsx`, чтобы она полностью повторяла логику готового модуля из `ГОТОВЫЕ_МОДУЛИ/аккаунты/keyset-v2-fixed`.  
   - Обеспечить цепочку: список прокси → выбор строки → `assignProxyToAccount` → обновление аккаунта без перезапуска → отображение статуса/geo в таблице и правой панели.  
   - Добавить проверки консистентности аккаунта (нет прокси, прокси не отвечает, старые cookies, рассинхрон GEO/таймзона) и показывать их в таблице и в правой панели.

7. **Боевой парсер прокси**  
   - Заменить демо‑генератор `_generate_proxy` в `POST /api/proxies/parse` на рабочий парсер.  
   - Реализовать поддержку источников: fineproxy, proxyelite, htmlweb, advanced.name, proxy.market с фильтрами по протоколу и стране.  
   - Сохранять результаты через `ProxyManager` без дублей, с нормализацией формата `protocol://[user:pass@]host:port` и логированием в общий журнал.

8. **Fingerprint: пресеты и проверка**  
   - Ввести согласованные пресеты fingerprint (например, Russia, Kazakhstan, No Spoofing) с фиксированными наборами полей (UA, язык, часовой пояс, Canvas/WebGL и т.п.).  
   - При выборе пресета сохранять параметры в аккаунт/extra‑поля и использовать их при запуске браузера и парсинге.  
   - Добавить проверку отпечатка через CreepJS (или аналог) с записью результата и статуса в журнал аккаунта.

9. **Капча: хранение и использование**  
   - Реализовать рабочую вкладку «Капча»: хранить выбранный сервис (RuCaptcha/2Captcha/AntiCaptcha) и ключ в extras аккаунта.  
   - Добавить backend‑эндпоинт для проверки баланса/статуса сервиса и отобразить его во вкладке.  
   - Интегрировать настройки капчи в автологин и парсер частотки, по схеме, совместимой с текущей продаваемой сборкой.

10. **Единая кнопка «Сохранить» и моментальное применение**  
    - Убедиться, что кнопка «Сохранить» внизу правой панели сохраняет все настройки аккаунта (основное, сеть, fingerprint, капча, прокси/strategy, профиль, extras).  
    - После сохранения обновлять данные аккаунта и таблицу без перезапуска backend/frontend, чтобы изменения были доступны сразу.

11. **Связка аккаунт → браузер → парсер из одного источника**  
    - Пройти цепочку: аккаунт в БД → профиль/прокси/fingerprint/капча (включая extras) → запуск браузера через `/api/accounts/launch` → мультипарсер частотки.  
    - Убедиться, что везде используется один и тот же источник данных без дублирующих конфигов и моков.  
    - При необходимости вычистить устаревшие пути и временные заглушки, которые расходятся с этой схемой.

12. **Журнал аккаунтов и уведомления**  
    - Доработать `AccountLogPanel`: автопрокрутка вниз при новых событиях, возможность фильтровать по аккаунту/типу события, удобное чтение ошибок запуска и автологина.  
    - Перевести оставшиеся `alert(...)` на нормальные уведомления (toast или inline‑сообщения) и писать все важные события в журнал.

13. **Статусы аккаунтов при парсинге частотки**  
    - Разделить временные и фатальные ошибки в логике статусов аккаунта при парсинге частотки.  
    - Сделать так, чтобы аккаунты с временными ошибками не «выпадали» навсегда и автоматически возвращались в статус `ok` после успешного прогона.  
    - Обеспечить отображение актуального статуса в таблице и правой панели по той же схеме, что в готовом HTML‑модуле.
