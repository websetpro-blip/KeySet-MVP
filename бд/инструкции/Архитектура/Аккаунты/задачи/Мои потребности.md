## Аккаунты и браузер

- Хочу добавлять и настраивать аккаунты полностью через правую панель (вкладки «Основное», «Сеть», «Fingerprint»), без чёрных всплывающих окошек `prompt` сверху.
- Для каждого аккаунта свой отдельный профиль браузера, который задаётся в правом блоке («Профиль Chrome») и используется везде: и при парсинге Wordstat, и при ручном запуске браузера по кнопке play.
- После изменения настроек справа (путь к профилю, прокси, fingerprint, куки) хочу, чтобы они применялись сразу – без перезапуска софта: нажал «Сохранить» и тут же могу запускать браузер и парсинг с новыми настройками.
- При запуске браузера с прокси не должно появляться окно с запросом логина/пароля прокси – авторизация должна происходить автоматически, как в рабочих браузерах при парсинге (по тем же данным, что я ввожу во вкладке «Сеть»).
- В перспективе нужна отдельная функция просмотра поисковой выдачи по выбранному GEO прямо из этих профилей (как в Key Collector), чтобы браузер для ручного просмотра использовал те же аккаунты, профили и прокси, что и мультипарсер.
- Не хочу разбираться, почему браузер/Playwright ломает авторизацию на прокси: софт сам должен выбирать нужную схему (хоть LocalAuthProxy, хоть что‑то ещё), чтобы при запуске из вкладки «Аккаунты» всегда было как в продовом парсере – без окон логина/пароля и с реально работающими сайтами.
- Если нужна “рабочая” гарантия — повторяем именно ту логику, что в продаваемой сборке `keyset-desktop` (ChromeLauncher + Manifest v3 ProxyAuth). Запуск по кнопке Play должен вести себя 1‑в‑1, без экспериментальных схем.
- При парсинге частотки аккаунты не должны навсегда «вылетать» из работы из‑за временных ошибок: даже если статус становится `error`, мультипарсер должен продолжать использовать такие аккаунты и автоматически возвращать им статус `ok` после успешного прогона.
- Во вкладке «Аккаунты» хочу одну понятную кнопку «Сохранить настройки аккаунта» внизу правой панели, которая применяет все изменения (email/пароль/профиль/fingerprint и др.), а не разные кнопки «Сохранить» на каждой вкладке; под полем профиля должен быть показан точный путь к файлу cookies и журнал по аккаунту, чтобы сразу было видно, где проблема (автологин, запуск через Play и т.п.).
- Я не хочу вручную запускать сборки фронтенда, перезапускать backend или читать логи консоли: все технические шаги (npm run build, перезапуск uvicorn/launcher) должен выполнять агент и в отчёте фиксировать, что именно он сделал.
- Блок настройки аккаунта должен быть интуитивным: одна общая кнопка «Сохранить настройки аккаунта» внизу, рядом кнопка «Автологин», а под полем «Профиль Chrome» отдельный блок cookies с точным путём и кнопками «Открыть», «Сохранить», «Удалить».
- Журнал логов по аккаунту хочу видеть под таблицей аккаунтов во всю ширину, чтобы сразу понимать, почему не запускается Play или автологин.
- Журнал должен показывать общие логи всех аккаунтов, автоматически прокручиваться вниз и иметь плашку, чтобы я мог увеличивать/уменьшать его высоту относительно таблицы.
- В правой панели рядом с полями нужны только компактные иконки (открыть/сохранить/удалить), без широких текстовых кнопок.
- Журнал и таблица должны визуально быть одним блоком: никаких больших отступов между ними, только одна узкая полоска‑резайзер, как на вкладке «Данные».
- Кнопки «Автологин» и «Сохранить настройки аккаунта» должны всегда быть на виду в правой панели (дублирование сверху и фиксированная панель снизу).
- Если пространство в правой панели пустует, нужно прижимать нижнюю панель с кнопками «Автологин»/«Сохранить» к самому низу (минимальные отступы), чтобы формы настроек занимали максимум высоты.
- Верхние кнопки «Автологин/Сохранить» в правой панели не нужны — оставляем единственный акцент снизу, именно фиксированная нижняя панель должна восприниматься основной.
- Журнал аккаунтов слева должен быть статичным и не прилипать к нижнему краю окна: нужна тонкая белая полоска под ним, как в журнале вкладки «Данные», чтобы граница всегда была видна.
- Блок журнала аккаунтов должен выглядеть строго как на вкладке «Данные»: прямоугольный, без овальных скруглений и лишних шапок, ширина прокрутки во всю доступную область.
- Надпись «ЖУРНАЛ АККАУНТОВ» и тёмная шапка над логами убираются, чтобы максимум места занимал сам текст логов.
- Полоска-резайзер между таблицей и журналом — едва заметная, с прозрачным фоном (как на вкладке «Данные»), но при этом тянется за края блока и позволяет перетаскивать вверх/вниз.
- Внутри журнала не должно быть дополнительных отступов сверху: текст логов начинается сразу от верхней границы блока.
- В правой панели возле путей профиля/cookies оставляем только чистые иконки действий без серых квадратов и рамок.
- Блок быстрых фильтров (кнопки «Только активные» / «Требуют входа» / ...) во вкладке «Аккаунты» пока убираем полностью, он мешает интерфейсу.
- Внизу журнала должна быть такая же светлая «подкладка»-полоса, как на вкладке «Данные»: тонкая серо-белая полоска на всю ширину, визуально отделяющая лог от нижней границы окна.
- Аккаунты: никаких лишних вертикальных/горизонтальных полей между таблицей и краями/правой панелью — окно таблицы прилегает вплотную, без белых полос.

## Процесс / поведение агента

- Всегда перед началом работы перечитывать `ПАМЯТКА_Codex.md` и актуальные файлы задач по модулю, не пропускать требования из памятки.
- Все новые требования и пожелания, которые ты пишешь в чатах, добавлять в этот файл, чтобы картина твоих потребностей была полной и не терялась между сессиями.
- После каждого логического блока работы обновлять отчёт `бд/инструкции/Архитектура/Задачи/Отчет/ЧТО УЖЕ СДЕЛАЛ.md` с кратким списком изменений и затронутых файлов.
- Работать строго в UTF-8: читать и писать файлы через `Get-Content -Encoding UTF8` / `Set-Content -Encoding UTF8`, без ломания кириллицы.
- По аккаунтам цель такая: чтобы ты мог менять аккаунты «как перчатки» — быстро подключать/отключать их вместе со всеми настройками (прокси, профиль, cookies, fingerprint), с минимальным числом кликов и без палевных паттернов для Яндекса.
- В чате не спамить лишними сообщениями, не спрашивать «что дальше?» и не писать «Finished working» — просто делать задачу до конца и фиксировать результат в отчётах.
- Когда прошу «анализируй док + скрин» — давай развёрнутый список: что уже сделано, что сломано и что ещё нужно доделать, чтобы я видел прогресс и не повторялся.
- Если переключаю на Codex-агента или прошу «анализируй чат/памятку по новой», перечитываешь всю переписку, добавляешь новые пункты в этот файл, и только после этого продолжаешь правки.
## Вкладка «Объявления»

- Вся вкладка повторяет прототип из `ГОТОВЫЕ МОДУЛИ/Объявления/ads-creator-standalone`: только левый блок настроек и центральный блок (предпросмотр + «Сгенерированные объявления»), без правых колонок. Таблица результатов располагается под центральным блоком.
- Левая колонка фиксированной ширины (можно чуть шире), компактная по высоте и с собственным вертикальным скроллом. Кнопка «🚀 Сгенерировать объявления» всегда внизу и видима даже при 1000 ключей; скролл почти незаметный, но блок остаётся статичным. Подсказки типа «Используйте {key} и {group}…» убираем.
- Центральный блок содержит все общие настройки (быстрые ссылки, отображаемая ссылка, уточнения, контакты). Любые изменения сразу применяются ко всем объявлениям, превью и таблице.
- Заголовок №1 формируется автоматически из ключа, ограничение 35 символов показываем в подсказке. Заголовок №1+№2 в сумме не более 65 символов — этот лимит также отображается. Заголовок №2 берётся из списка прибавок и обновляется у всех объявлений, ручного редактирования нет.
- Тексты объявлений берутся из блока «Тексты объявлений» (самый длинный вариант до 81 символа). Демонстрационные данные нейтральные, без «систем очистки воды» и домена nordkor.ru.
- Быстрые ссылки редактируются по прототипу: для каждой ссылки свои заголовок, описание и URL; данные идут в таблицу и экспорт (`||`). Уточнения редактируются в одном блоке и применяются к каждой записи. Якоря/описания не дублируют текст объявления.
- Блок «Сгенерированные объявления (0)» полностью повторяет standalone: таблица под превью, кнопки TSV/CSV сверху и зафиксированы.
- При генерации N ключей получаем N объявлений. Все данные (заголовки, тексты, уточнения, быстрые ссылки, URL) подтягиваются из левого блока и текущих настроек, старые шаблоны не используются.
- Кнопка генерации и левая колонка не «уплывают» вниз — при большом количестве ключей работает скролл, чтобы всегда добраться до кнопки.
- Экспорт TSV (и копирование в буфер) строится строго по колонкам из `бд/инструкции/Архитектура/Задачи/Новое/объявления/1`, чтобы вставлять в Direct Commander без правок.
