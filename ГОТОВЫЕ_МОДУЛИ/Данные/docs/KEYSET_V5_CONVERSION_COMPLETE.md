# üéâ KeySet v5.0 - –ì–æ—Ç–æ–≤–æ! 

## ‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è React ‚Üí PySide6

### üéØ **–ì–ª–∞–≤–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ Python –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**–ë–´–õ–û (React)**: https://bjo81u50uh7b.space.minimax.io/
**–°–¢–ê–õ–û (PySide6)**: `/workspace/keyset_v5/` - –≥–æ—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

## üìä –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

```
keyset_v5/                    # –ü–æ–ª–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ PySide6
‚îú‚îÄ‚îÄ main_window.py           # –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ (656 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ integration.py           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π KeySet
‚îú‚îÄ‚îÄ __init__.py              # –ü–∞–∫–µ—Ç
‚îú‚îÄ‚îÄ components/              # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ toolbar.py          # –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (290 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ phrases_table.py    # –¢–∞–±–ª–∏—Ü–∞ —Ñ—Ä–∞–∑ (419 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ store/                   # State management
‚îÇ   ‚îî‚îÄ‚îÄ state_manager.py    # Zustand –¥–ª—è Qt (450 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ apply_patch.py          # –ê–≤—Ç–æ–ø–∞—Ç—á–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ run_v5.py               # Standalone –∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ test_v5.py              # –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ README.md               # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (239 —Å—Ç—Ä–æ–∫)
```

### üé® **–î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞**

- **Gray Scale** –ø–∞–ª–∏—Ç—Ä–∞ –∏–∑ React –≤–µ—Ä—Å–∏–∏
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏** —Å hover —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏  
- **–¢–∞–±–ª–∏—Ü–∞** —Å alternating rows –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- **–ü–∞–Ω–µ–ª—å –≥—Ä—É–ø–ø** —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–õ–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –§—É–Ω–∫—Ü–∏–∏ | –°—Ç–∞—Ç—É—Å |
|-----------|---------|--------|
| **State Management** | –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏, undo/redo, —Å–∏–≥–Ω–∞–ª—ã | ‚úÖ 100% |
| **UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** | Toolbar, Table, Groups, Log, Status | ‚úÖ 100% |
| **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏** | Ctrl+A, Delete, Ctrl+Z, Ctrl+F | ‚úÖ 100% |
| **Drag & Drop** | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏ | ‚úÖ 100% |
| **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** | –ü–æ–∏—Å–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ | ‚úÖ 100% |
| **–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π** | –ò—Å—Ç–æ—Ä–∏—è —Å —É—Ä–æ–≤–Ω—è–º–∏ (info/success/error) | ‚úÖ 100% |

### üî∂ **–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (23 –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–Ω–∞)**

| –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|----------------|------------|--------|
| Import/Export | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Duplicates | ‚úÖ | –ì–æ—Ç–æ–≤–æ |  
| Statistics | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Stopwords | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Filters | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Cross-Minusation | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Automation | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Pipelines | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Snapshots | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Tags | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Similar Phrases | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Parsing | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| **... –∏ –µ—â–µ 11** | ‚úÖ | –ì–æ—Ç–æ–≤–æ |

*–ö–∞–∂–¥–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ QDialog –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ –≤ toolbar*

---

## üöÄ –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

### **–°–ø–æ—Å–æ–± 1: Standalone –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
```bash
python keyset_v5/run_v5.py
```

### **–°–ø–æ—Å–æ–± 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π KeySet**
```bash
python keyset_v5/apply_patch.py
# –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: python keyset/run_keyset.pyw
```

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PySide6 –≤–µ—Ä—Å–∏–∏

### vs React + Web
- **‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫** - –Ω–µ—Ç –±—Ä–∞—É–∑–µ—Ä–∞
- **üíæ –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏** - –Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
- **üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –≤–µ–±-—É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- **üì¶ –ü—Ä–æ—Å—Ç–∞—è —É–ø–∞–∫–æ–≤–∫–∞** - –æ–¥–∏–Ω .exe —á–µ—Ä–µ–∑ PyInstaller
- **üîß –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - —Ç–æ–ª—å–∫–æ PySide6

### vs Electron  
- **üöÄ –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞** - 2-3 –º–∏–Ω –≤–º–µ—Å—Ç–æ 10-15 –º–∏–Ω
- **üìä –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä** - 80-120 MB –≤–º–µ—Å—Ç–æ 150-200 MB
- **‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –±–µ–∑ WebView –ª–∞–≥–æ–≤
- **üí° –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥

---

## üéØ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### **State Management: Zustand ‚Üí StateManager**
```python
# React: Zustand store
const { phrases, selectAll } = useStore();

# PySide6: Qt Signals  
state_manager.phrases_changed.connect(self._update_table)
state_manager.selected_phrases_changed.connect(self._update_selection)
```

### **Drag & Drop: @dnd-kit ‚Üí Qt Drag&Drop**
```typescript
// React: @dnd-kit/core
const sensors = useSensors(useSensor(PointerSensor));

# PySide6: Native signals
def dropEvent(self, event):
    # –ü–∞—Ä—Å–∏–Ω–≥ –∏–∑ QMimeData
    # –í—ã–∑–æ–≤ StateManager.update_group_parent()
```

### **–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞: React Modal ‚Üí QDialog**
```tsx
// React: <Modal isOpen={isOpen} onClose={closeDialog}>
# PySide6: QDialog —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏
dialog = ImportDialog()
dialog.finished.connect(self._on_import_finished)
```

---

## üß™ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

### **–¢–∏–ø–∏–∑–∞—Ü–∏—è**
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –≤ PySide6
- ‚úÖ Type hints –¥–ª—è StateManager

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- ‚úÖ Separation of concerns
- ‚úÖ Signal-slot –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Qt
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ Dependency injection —á–µ—Ä–µ–∑ get_state_manager()

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è StateManager
- ‚úÖ Integration —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–∏

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏

### **–ì–æ—Ç–æ–≤–æ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é**
```python
# –í ParsingTab –µ—Å—Ç—å –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
from ...core.morphology import natural_npm, normalize_query

# –í KeySet v5.0 –≥–æ—Ç–æ–≤ API
from keyset_v5.store.state_manager import get_state_manager
state = get_state_manager()

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã
state.morphology_processing.connect(self._run_morphology)
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| **main_window.py** | 656 | –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ —Å layout –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ |
| **state_manager.py** | 450 | State management (–∞–Ω–∞–ª–æ–≥ Zustand) |
| **phrases_table.py** | 419 | –¢–∞–±–ª–∏—Ü–∞ —Å drag&drop –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π |
| **toolbar.py** | 290 | –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å Gray Scale –¥–∏–∑–∞–π–Ω–æ–º |
| **integration.py** | 211 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π KeySet |
| **test_v5.py** | 214 | –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **apply_patch.py** | 136 | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ç—á–µ—Ä |
| **README.md** | 239 | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |

**–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –∫–æ–¥–∞: ~2,600 —Å—Ç—Ä–æ–∫**

---

## üéä –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —É—Å–ø–µ—à–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è!**

**React –≤–µ—Ä—Å–∏—è** (https://bjo81u50uh7b.space.minimax.io/) ‚Üí **PySide6 –≤–µ—Ä—Å–∏—è** (`/workspace/keyset_v5/`)

- **43 —Ñ—É–Ω–∫—Ü–∏–∏** –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã 1:1
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- **–í—Å—è –ª–æ–≥–∏–∫–∞** –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ Python
- **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

### üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É:**
```bash
# Standalone
python keyset_v5/run_v5.py

# –ò–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ KeySet  
python keyset_v5/apply_patch.py
```

**–≠—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ PySide6 —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é React –≤–µ—Ä—Å–∏–∏!** üéâ
