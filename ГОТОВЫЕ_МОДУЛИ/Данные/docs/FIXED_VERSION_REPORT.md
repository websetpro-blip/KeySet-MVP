# KeySet v5.0 - –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–°—Ç—Ä–∞–Ω–∏—Ü–∞ KeySet v5.0 –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –∏–∑-–∑–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ JavaScript:
```
Uncaught RangeError: Maximum call stack size exceeded
at index-9iURWZYP.js:1:1
```

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã
–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å:
1. **–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ localStorage** - JSON.parse –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–∞–¥–∞–ª–∏ –Ω–∞ –±–∏—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –≤ —Å–Ω–∞–ø—à–æ—Ç–∞—Ö** - JSON.stringify –Ω–µ –º–æ–≥ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã —Å —Ü–∏–∫–ª–∞–º–∏
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫** - –≤—Å–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏–≤–æ–¥–∏–ª–∏ –∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—é —Å—Ç–µ–∫–∞

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ localStorage –æ–ø–µ—Ä–∞—Ü–∏–∏
```typescript
// –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
const safeRestore = (key: string, fallback: any = null) => {
  try {
    const data = localStorage.getItem(key);
    if (data) {
      return JSON.parse(data);
    }
  } catch (error) {
    console.warn(`–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è ${key}:`, error);
    localStorage.removeItem(key); // –û—á–∏—â–∞–µ–º –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  }
  return fallback;
};
```

### 2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
```typescript
const safeClone = (obj: any) => {
  try {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏
    if (obj.__visited) {
      return null;
    }
    obj.__visited = true;
    // ... –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    delete obj.__visited;
    return result;
  } catch (error) {
    console.warn('–û—à–∏–±–∫–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞:', error);
    return null;
  }
};
```

### 3. Fallback –∑–Ω–∞—á–µ–Ω–∏—è
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- `state.columnOrder = safeRestore('columnOrder', [])`
- `state.markedPhraseIds = safeRestoreSet('markedPhraseIds', new Set())`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (–Ω–µ—Ä–∞–±–æ—á–∞—è)
- **URL:** https://1rt1iv2r9hkk.space.minimax.io
- **–°—Ç–∞—Ç—É—Å:** ‚ùå "Maximum call stack size exceeded"
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ü—É—Å—Ç–∞—è –±–µ–ª–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)
- **URL:** https://x2i56ha7labw.space.minimax.io
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–†–∞–∑–º–µ—Ä:** 10.99 MB (2.73 MB gzip)
- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:** 29.01s

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫
1. **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ localStorage** - –±–∏—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **Graceful degradation** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω–æ–π –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö
3. **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤ –∏ Set –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏

## üìà –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –í—Å–µ 43 —Ñ—É–Ω–∫—Ü–∏–∏ v5.0 —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –í—Å–µ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –í—Å–µ –º–æ–¥–∞–ª—ã –∏ DnD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–Ω–∞–ø—à–æ—Ç–æ–≤, —Ç–µ–≥–æ–≤, –ø–∞–π–ø–ª–∞–π–Ω–æ–≤

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:** `src/store/useStore.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–π:** 47 —Å—Ç—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- **–ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:** 2 (`safeRestore`, `safeRestoreSet`)
- **–£–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:** –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏, –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ JSON.parse

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞. KeySet v5.0 —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ –Ω–æ–≤–æ–º URL. –í—Å–µ –¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –≤ localStorage –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–ª–∏ –æ—á–∏—â–µ–Ω—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–π URL –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã —Å KeySet v5.0.
