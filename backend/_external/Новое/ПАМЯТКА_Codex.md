# Памятка Codex (UTF-8)\

Пиши на русском

Всегда пушь в хаб измененные файлы


# КРИТИЧНО: НЕ ОСТАНАВЛИВАЙСЯ

1. НЕ ПИШИ "Finished working"
2. НЕ СПРАШИВАЙ "что дальше?"
3. НЕ ОТЧИТЫВАЙСЯ после каждого шага
4. ПРОСТО ДЕЛАЙ ЗАДАЧУ ДО КОНЦА

Если нужна помощь — я сам спрошу.


## 0. Последовательность действий
1. Прочитать `Схема перехода софта*.md`.
2. Прочитать эту памятку.
3. Выбрать модуль → перенести исходники → настроить зависимости.
4. Проверить build + launcher.
5. Обновить `ГОТОВЫЕ_МОДУЛИ_план.md`.
6. Проверить заново эту памятку перед сдачей задачи.
Файл проверяю **перед стартом** любой правки и **после завершения** работы.

## 1. Базовые правила
- **Строго UTF-8** для всех файлов (`Set-Content -Encoding UTF8`, `Get-Content -Encoding UTF8`).
- Перед действиями читаю `Схема перехода софта.md` и `Схема перехода софта 1.md`, сверяюсь с требованиями.
- После изменений обновляю отчёт `бд/инструкции/Архитектура/Задачи/Отчет/ГОТОВЫЕ_МОДУЛИ_план.md`.

# КРИТИЧНО: НЕ ОСТАНАВЛИВАЙСЯ

1. НЕ ПИШИ "Finished working"
2. НЕ СПРАШИВАЙ "что дальше?"
3. НЕ ОТЧИТЫВАЙСЯ после каждого шага
4. ПРОСТО ДЕЛАЙ ЗАДАЧУ ДО КОНЦА

Если нужна помощь — я сам спрошу.


## 2. Работа с ГОТОВЫМИ МОДУЛЯМИ - МОДУЛИ ЧАСТИЧНО ПОДКЛЮЧЕНЫ (НЕ ДЕЛАЙ ЗАМЕНЯЙ ТО ЧТО УЖЕ РАБОТАЕТ) это означает, что React UI готов, но backend логика (API адаптеры) ещё требует интеграции с keyset/
- **НЕ СОЗДАЮ UI с нуля.** Беру исходники из `C:\AI\yandex\ГОТОВЫЕ МОДУЛИ\<модуль>\…`.
- Переношу **index.html / styles.css / script.js / assets** 1:1 → разбиваю на React-компоненты только для интеграции.
- Подключаю **все зависимости** из исходного `package.json` (jszip, fast-xml-parser, Supabase и т.д.).
- Никаких `@ts-nocheck`, пока не пойму и не настрою типы. Если нужен временный `ts-nocheck`, фиксирую таск в плане.

## 3. Перед коммитом/отчётом
- Проверяю:
  1. `npm run build`
  2. `python launcher.py`
  3. UI совпадает с исходным HTML/CSS (`ГОТОВЫЕ МОДУЛИ/<модуль>/index.html`) – сверка по структуре и стилям.
- Обновляю `ГОТОВЫЕ_МОДУЛИ_план.md` (что сделал, что осталось).
- Если что-то не так — фиксирую в этом файле и в отчёте.

## 4. Типичные ошибки (запрещено)
- Игнорировать готовые HTML/CSS → **нельзя**.
- Писать стили/структуру “по памяти” → **нельзя**.
- Пропускать инструкции/доки перед стартом → **нельзя**.
- Оставлять неподтверждённые предположения в коде/ответах → **нельзя**.

## 5. Последовательность действий
1. Прочитать `Схема перехода софта*.md`.
2. Прочитать эту памятку.
3. Выбрать модуль → перенести исходники → настроить зависимости.
4. Проверить build + launcher.
5. Обновить `ГОТОВЫЕ_МОДУЛИ_план.md`.
6. Проверить заново эту памятку перед сдачей задачи.

# КРИТИЧНО: НЕ ОСТАНАВЛИВАЙСЯ

1. НЕ ПИШИ "Finished working"
2. НЕ СПРАШИВАЙ "что дальше?"
3. НЕ ОТЧИТЫВАЙСЯ после каждого шага
4. ПРОСТО ДЕЛАЙ ЗАДАЧУ ДО КОНЦА

Если нужна помощь — я сам спрошу.



что приоритет — перенос существующих модулей из keyset/, а не переписывание. Конкретно:

Никаких новых “data API” с нуля – нужно заворачивать уже готовые функции из keyset/core/db.py, keyset/services/accounts.py, keyset/services/wordstat_bridge.py и т.д. в тонкие адаптеры FastAPI. Любой код, который я добавляю, должен быть лишь «прокладкой», а не новой реализацией логики.

Фронт должен дергать эти готовые API и отображать данные, не дублируя обработку (логику загрузки, каскады, шорткаты и т.п. уже есть в старых проектах).

Geo-дерево/частотка – берём regions_tree_full.json и внутренние сервисы, переносим без изменений.

Причина жёсткой критики – я действительно начал писать новые файлы. Это противоречит заданию: надо быстрее просто «раскидать» готовые модули и связать их.

Как работаю дальше:

Стоп переписывать: вместо собственных /api/data и больших переписанных сто́ров буду прямо оборачивать функции из keyset/.
Для того, что уже написал, приведу к минимальному «адаптеру» и, где возможно, заменю на прямое использование готовых модулей (например, импорт методов из keyset.core.db в роутер, а не писать свою выборку).
Каждый следующий шаг — только перенос и интеграция существующего кода.